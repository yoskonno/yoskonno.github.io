<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.f96b5d4417f78d72b46c.css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{-webkit-box-sizing:content-box;box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{-webkit-box-sizing:border-box;box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-box-sizing:border-box;box-sizing:border-box}*,:after,:before{-webkit-box-sizing:inherit;box-sizing:inherit}body{color:#4a4a4a;line-height:1.5;font-family:BlinkMacSystemFont,-apple-system,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif}h1,h2,h3,h4,h5{color:#2d2d2d;font-weight:700;line-height:1.125}a{text-decoration:none;word-break:break-all}img{height:auto;max-width:100%}code,pre{-moz-osx-font-smoothing:auto;-webkit-font-smoothing:auto}pre{background-color:#f1f1f1;font-size:.9rem;overflow:auto;padding:18px 25px!important}code{background-color:#f5f5f5;color:#f14668;font-family:monospace;font-size:1.2rem;font-weight:400;padding:.25em .5em;word-break:break-all}.hljs>code{background-color:unset;color:unset;font-family:unset;font-size:unset;font-weight:unset;padding:unset;word-break:unset}*{-webkit-box-sizing:border-box;box-sizing:border-box}.main-inner{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 auto;max-width:90%;padding-bottom:50px;width:1500px}@media screen and (max-width:767px){.main-inner{max-width:100%}}.container{height:100%;margin:0 auto;max-width:90%;width:1500px}.contents-container{width:75%}@media screen and (max-width:767px){.contents-container{width:100%}}.sidebar-container{width:25%}@media screen and (max-width:767px){.sidebar-container{width:100%}}.section{padding:30px 15px}.section--gray{background-color:#f5f5f5}.banner__image-wrapper{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}.banner__image{max-width:300px;width:100%}.banner__image--medium{max-width:600px;padding:15px 30px}.button{border:1px solid #dbdbdb;color:#363636;cursor:pointer;-ms-flex-pack:center;justify-content:center;padding:calc(.5em - 1px) 1em;text-align:center;white-space:nowrap}.button--small{border-radius:2px;font-size:.75rem}.comment__item{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;margin:30px 0}.comment__item-upper{-ms-flex-align:baseline;align-items:baseline;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:justify;justify-content:space-between}.comment__name{font-weight:700}.comment__date{font-size:.85em}.comment__child-container{padding-left:30px}.comment__reply-button{-ms-flex-item-align:start;align-self:flex-start;background:none;border:none;color:#13c4a5;cursor:pointer;font-size:.85em;margin:5px 0;padding:0;text-align:left}.comment__reply-button:focus{outline:none!important}.comment-form{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;max-width:600px}.comment-form__input{border:1px solid #dadada;border-radius:3px;margin:5px 0;padding:5px}.comment-form__sent-message{color:#13c4a5}.comment-form__error-message{color:#ff3030}.comment-form__button{border:none;border-radius:3px;cursor:pointer;height:40px;margin:5px 0}.comment-form__button--sending{opacity:.5}.comment-form__button:focus{outline:none!important}.comment-form__spinner-wrapper{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}.comment-form__spinner{background-color:#13c4a5}.footer{background-color:#333;color:#eee}.footer__inner{display:-ms-flexbox;display:flex;padding-top:50px;padding-bottom:50px}@media screen and (max-width:767px){.footer__inner{-ms-flex-direction:column-reverse;flex-direction:column-reverse;padding-top:15px}}.footer__column-container{display:-ms-flexbox;display:flex;-ms-flex:1 1;flex:1 1;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:distribute;justify-content:space-around}.footer__column{margin:0 10px}@media screen and (max-width:1199px){.footer__column{margin-top:40px;padding-left:15px;width:40%}}@media screen and (max-width:767px){.footer__column{margin-top:40px;padding-left:15px;width:100%}}.footer__column-title{border-bottom:2px solid #13c4a5;color:#eee;display:inline-block;font-size:1.2rem;line-height:1.4rem;margin-bottom:15px;margin-top:0}.footer a{color:#eee}.footer__bottom-area{-ms-flex-direction:column;flex-direction:column}.footer__bottom-area,.footer__logo-wrapper{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}.footer__logo-wrapper{padding:0 50px}@media screen and (max-width:1199px){.footer__logo-wrapper{padding:0 80px}}@media screen and (max-width:767px){.footer__logo-wrapper{padding:60px 0 30px}}.footer__logo-image{height:120px;width:120px}.footer__copyright{color:#828282;font-size:.8rem;height:30px;line-height:30px}.header{background-color:#fff;border-bottom:1px solid #eee;font-size:1.1rem;width:100%;z-index:10}.header a{color:#4a4a4a}.header__upper{border-bottom:1px solid #eee;height:40px}.header__upper.isFixed{display:none}@media screen and (max-width:767px){.header__upper{height:60px}}.header__upper-inner{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;padding-left:30px}@media screen and (max-width:767px){.header__upper-inner{padding-left:0}}.header__subtitle{margin:0 0 0 15px}@media screen and (max-width:767px){.header__subtitle{font-size:1rem;margin:0 auto;text-align:center}}.header__main{height:75px}.header__main.isFixed{height:40px}@media screen and (max-width:767px){.header__main{height:110px}}.header__main-inner{display:-ms-flexbox;display:flex;padding-left:45px}@media screen and (max-width:767px){.header__main-inner{padding-left:0}}.header__logo-link{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex}@media screen and (max-width:767px){.header__logo-link{-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:space-evenly;justify-content:space-evenly;padding:5px 0;width:100%}}.header__logo-image{height:40px;width:40px}.header__logo-image.isFixed{height:25px;width:25px}.header__logo-text{font-size:1.8rem;margin:0 30px}@media screen and (max-width:767px){.header__logo-text{font-size:1.2rem}}.header__logo-text.isFixed{font-size:1.2rem;margin:0 15px}.header__link-container{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;margin-left:20px}@media screen and (max-width:767px){.header__link-container{display:none}}.header__link{margin:0 15px}.pagination{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:center;justify-content:center;padding:0 30px}.pagination__item{border:1px solid #e4e4e4;border-radius:3px;color:#13c4a5;margin:0 4px 10px}.pagination__dots{color:#2d2d2d}.pagination a{color:#2d2d2d;display:block}.pagination__non-link-content,.pagination a{height:100%;padding:5px 15px;width:100%}.post-link{display:-ms-flexbox;display:flex}.post-link__left{padding-right:10px}.post-link__left,.post-link__right{text-decoration:none!important;width:50%}.post-link__right{padding-left:10px}.post-link__link-text,.post-link__title{text-decoration:none}.post-list{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:start;justify-content:flex-start;width:100%}.post-list__section-title{font-size:1.3rem;margin-bottom:30px;margin-left:-2%;margin-top:0;text-align:center}.post-list__item-wrapper{display:block;width:31%;margin-right:2%;margin-bottom:20px;-webkit-transition:all .3s ease-out;transition:all .3s ease-out}@media screen and (max-width:1023px){.post-list__item-wrapper{margin-left:1%;margin-right:1%;width:48%}}@media screen and (max-width:575px){.post-list__item-wrapper{margin-right:0;width:100%}}.post-list__item-wrapper:hover{-webkit-transform:scale(1.04);transform:scale(1.04)}.post-list__item{border:1px solid #f1f1f1;border-radius:6px;-webkit-box-shadow:0 7px 14px rgba(0,0,0,.07);box-shadow:0 7px 14px rgba(0,0,0,.07);display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%}.post-list__thumbnail{border-radius:6px 6px 0 0;width:100%;padding-bottom:65%;background-position:50%;background-repeat:no-repeat}.post-list__main-area{color:#2d2d2d;display:-ms-flexbox;display:flex;-ms-flex:1 1;flex:1 1;-ms-flex-direction:column;flex-direction:column;padding:15px}.post-list__title{font-size:1.1rem;font-weight:700;line-height:1.5;margin:15px 0}.post-list__small{color:grey;font-size:.8rem;margin:0}.post-list__small a{color:#13c4a5}.post-list__excerpt{margin-top:15px}.post-list__excerpt p{margin:0}.post-list__button-area{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;margin-top:auto;padding-top:10px}.post{line-height:1.7;padding-left:50px;padding-right:50px;font-size:1.1rem}@media screen and (max-width:575px){.post{padding:0}}.post__title{font-size:2.5em!important;margin-top:40px!important}.post__date-and-author{color:grey;margin:30px 0}.post__top-image-wrapper{display:-ms-flexbox;display:flex;max-height:400px;min-height:300px;-ms-flex-pack:center;justify-content:center}.post__top-image{max-height:400px;-o-object-fit:contain;object-fit:contain}.post h2{font-size:1.75em;margin-top:40px;margin-bottom:20px}.post h3,.post h4{margin-top:30px;margin-bottom:15px}.post a{color:#13c4a5;text-decoration:underline}.post a:hover{color:#18d3b1}.post *{word-break:break-word}.sharing-buttons__item{margin:0 3px}.tag__container{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.tag__item{-ms-flex-align:center;align-items:center;background-color:#f3f3f3;border-radius:4px;display:-ms-inline-flexbox;display:inline-flex;font-size:.75rem;height:2em;-ms-flex-pack:center;justify-content:center;line-height:1.5;margin:6px 10px 6px 0;padding-left:.75em;padding-right:.75em;white-space:nowrap}.tag__link{color:#4a4a4a!important;text-decoration:none!important}.widget{margin-bottom:50px;margin-top:50px;padding-left:15px;padding-right:15px}@media screen and (max-width:767px){.widget{padding-left:50px;padding-right:50px}}@media screen and (max-width:575px){.widget{padding-left:15px;padding-right:15px}}.widget__title{font-size:1.2rem}.widget ul{list-style:none;padding-left:0}.widget li{border-top:1px solid #e9e9e9;padding:.7rem 0}.widget li:last-child{border-bottom:1px solid #e9e9e9}.widget a{color:#4a4a4a}.hljs{display:block;overflow-x:auto;padding:.5em;background:#232323;color:#e6e1dc}.hljs-comment,.hljs-quote{color:#bc9458;font-style:italic}.hljs-keyword,.hljs-selector-tag{color:#c26230}.hljs-number,.hljs-regexp,.hljs-string,.hljs-template-variable,.hljs-variable{color:#a5c261}.hljs-subst{color:#519f50}.hljs-name,.hljs-tag{color:#e8bf6a}.hljs-type{color:#da4939}.hljs-attr,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-link,.hljs-symbol{color:#6d9cbe}.hljs-params{color:#d0d0ff}.hljs-attribute{color:#cda869}.hljs-meta{color:#9b859d}.hljs-section,.hljs-title{color:#ffc66d}.hljs-addition{background-color:#144212}.hljs-addition,.hljs-deletion{color:#e6e1dc;display:inline-block;width:100%}.hljs-deletion{background-color:#600}.hljs-selector-class{color:#9b703f}.hljs-selector-id{color:#8b98ab}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><meta name="generator" content="Gatsby 2.21.21"/><title data-react-helmet="true">OpenSSLを使った安全なファイルの転送を検証してみる – もばらぶエンジニアブログ</title><meta data-react-helmet="true" name="robots" content="noindex, nofollow"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:site_name" content="もばらぶエンジニアブログ"/><meta data-react-helmet="true" property="og:locale" content="ja_JP"/><meta data-react-helmet="true" name="twitter:creator" content="@mobalab"/><meta data-react-helmet="true" name="twitter:site" content="@mobalab"/><meta data-react-helmet="true" name="description" content="こんにちは！今年もあと残すところ11ヶ月を切ってしまいました。時間が経つのは早いですね・・・。さて、今回はOpenSSLを使って表題の件を検証をしてみたいと思います。 先日、とあるファイル共有サービスのログイン情報を含む ...
"/><meta data-react-helmet="true" property="og:title" content="OpenSSLを使った安全なファイルの転送を検証してみる"/><meta data-react-helmet="true" property="og:description" content="こんにちは！今年もあと残すところ11ヶ月を切ってしまいました。時間が経つのは早いですね・・・。さて、今回はOpenSSLを使って表題の件を検証をしてみたいと思います。 先日、とあるファイル共有サービスのログイン情報を含む ...
"/><meta data-react-helmet="true" property="og:url"/><meta data-react-helmet="true" property="og:image" content="https://i1.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/02/marcos-mayer-735961-unsplash-scaled.jpg?fit=768%2C512&amp;ssl=1"/><link as="script" rel="preload" href="/webpack-runtime-de1f906f2eeac1e4d45f.js"/><link as="script" rel="preload" href="/framework-d53df25ab0068ecd1ffc.js"/><link as="script" rel="preload" href="/app-388f3e9c75b1616484c3.js"/><link as="script" rel="preload" href="/styles-da2d348018617ad0abdc.js"/><link as="script" rel="preload" href="/29107295-3eadfd8d28513cbe1d99.js"/><link as="script" rel="preload" href="/2852872c-266d0f544f9db0fe515a.js"/><link as="script" rel="preload" href="/commons-e1b0c49c3875256839c2.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-9fbfa639a23c74cb9bb9.js"/><link as="fetch" rel="preload" href="/page-data/2019/02/18/experiment-of-open-ssl-for-secure-file-transfer/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="header"><div class="header__upper "><div class="header__upper-inner container"><p class="header__subtitle">リモート開発メインのソフトウェア開発企業のエンジニアブログです</p></div></div><div class="header__main "><div class="header__main-inner container"><a class="header__logo-link" href="/"><img class="header__logo-image " src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNDAgMjQwIj48cG9seWdvbiBwb2ludHM9IjAgMjYuNjcgMTMuMzMgMjYuNjcgMTMuMzMgNDAgMCA0MCAwIDY2LjY3IDEzLjMzIDY2LjY3IDEzLjMzIDEwNi42NyAxMDYuNjcgMTA2LjY3IDEwNi42NyA4MCA0MCA4MCA0MCA2Ni42NyAxMDYuNjcgNjYuNjcgMTA2LjY3IDQwIDQwIDQwIDQwIDI2LjY3IDEwNi42NyAyNi42NyAxMDYuNjcgMCAwIDAgMCAyNi42NyIvPjxyZWN0IHg9IjQwIiB5PSIxMzMuMzMiIHdpZHRoPSI2Ni42NyIgaGVpZ2h0PSIyNi42NyIvPjxwb2x5Z29uIHBvaW50cz0iMjYuNjcgMTMzLjMzIDAgMTMzLjMzIDAgMjAwIDI2LjY3IDIwMCA4MCAyMDAgODAgMjEzLjMzIDAgMjEzLjMzIDAgMjQwIDEwNi42NyAyNDAgMTA2LjY3IDE3My4zMyAyNi42NyAxNzMuMzMgMjYuNjcgMTMzLjMzIi8+PHBvbHlnb24gcG9pbnRzPSIxMzMuMzMgMTYwIDE3My4zMyAxNjAgMTczLjMzIDI0MCAyMDAgMjQwIDIwMCAxMzMuMzMgMTMzLjMzIDEzMy4zMyAxMzMuMzMgMTYwIi8+PHJlY3QgeD0iMTMzLjMzIiB5PSIxNzMuMzMiIHdpZHRoPSIyNi42NyIgaGVpZ2h0PSI2Ni42NyIvPjxyZWN0IHg9IjIxMy4zMyIgeT0iMTczLjMzIiB3aWR0aD0iMjYuNjciIGhlaWdodD0iNjYuNjciLz48cmVjdCB4PSIyMDYuNjciIHk9IjEzMy4zMyIgd2lkdGg9IjEzLjMzIiBoZWlnaHQ9IjEzLjMzIi8+PHJlY3QgeD0iMjI2LjY3IiB5PSIxMzMuMzMiIHdpZHRoPSIxMy4zMyIgaGVpZ2h0PSIxMy4zMyIvPjxyZWN0IHg9IjEzMy4zMyIgd2lkdGg9IjI2LjY3IiBoZWlnaHQ9IjEwNi42NyIvPjxyZWN0IHg9IjIwNi42NyIgd2lkdGg9IjEzLjMzIiBoZWlnaHQ9IjEzLjMzIi8+PHJlY3QgeD0iMjI2LjY3IiB3aWR0aD0iMTMuMzMiIGhlaWdodD0iMTMuMzMiLz48cGF0aCBkPSJNMjAwLDBIMTczLjMzVjI2LjY3aDQwVjQwaC00MHY2Ni42N0gyNDBWMjBIMjAwWm0xMy4zMyw4MEgyMDBWNjYuNjdoMTMuMzNaIi8+PC9zdmc+" alt="もばらぶ"/><p class="header__logo-text ">もばらぶエンジニアブログ</p></a><div class="header__link-container"><a class="header__link" href="/">Home</a><a class="header__link" href="https://mobalab.net/recruit/" rel="noopener noreferrer" target="_blank">採用情報</a><a class="header__link" href="/categories/en">English</a></div></div></div></header><main class="main"><div class="main-inner" style="margin-top:0"><div class="contents-container"><div class="post"><section class="section"><div class="post__top-image-wrapper"><img src="https://i1.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/02/marcos-mayer-735961-unsplash-scaled.jpg?fit=768%2C512&amp;ssl=1" alt="" class="post__top-image"/></div><h1 class="post__title">OpenSSLを使った安全なファイルの転送を検証してみる</h1><p class="post__date-and-author">February 18, 2019 - posted by <a href="/author/issei">issei_m</a></p><div>
<p>こんにちは！今年もあと残すところ11ヶ月を切ってしまいました。時間が経つのは早いですね・・・。<br>さて、今回はOpenSSLを使って表題の件を検証をしてみたいと思います。</p>



<p>先日、とあるファイル共有サービスのログイン情報を含む会員情報が流出すると言うインシデントがあったのは記憶に新しいかと思います。<br>これを書いている2月13日時点では、顧客のファイル自体の流出については報告がありませんが、利用者としては最悪の事態を想定する他ありません。</p>



<p>その上で、利用者として、今後この様な事故の被害を最小限に抑えるにはどうしたら良いでしょうか？<br>色々あるかと思いますが、1つは暗号化です。<br>大抵の場合インターネット上でファイルを送受信する際には必ず使われている暗号化ですが、今回のケースのように、それを解く為のクレデンシャルが流出していた場合意味がありません。<sup><a id="to-annotate-1" href="#annotate-1">[1]</a></sup></p>



<p>今回の事故以外でも、単に権限をミスったりしてファイルが流出していたなんて事もあります。これはGoogle Driveを使おうがAmazon S3を使おうが一緒です。<sup><a href="#annotate-2" id="to-annotate-2">[2]</a></sup></p>



<p>ファイルを転送する前に自前で更に暗号化をし、更に受信者だけが確実に復号できる仕組みを用意できれば、少しは安心できそうな気がします。</p>



<p>と言う訳で、長くなりましたが以上が本件を書こうと思った経緯です。</p>



<p>また、今回検証には全てmacOS Mojaveを使っており、OpenSSLも最初から入っている物を使ってます。</p>



<h2 id="対象読者"><a href="https://hackmd.io/pqYt6WqgReuZX3Nlr0svCw?view#%E5%AF%BE%E8%B1%A1%E8%AA%AD%E8%80%85"></a>対象読者</h2>



<p>共通鍵暗号、公開鍵暗号等の暗号化技術にあまり詳しくない方。もしくは、OpenSSLを使って実際に暗号化を行った事が無い方を対象としています。</p>



<h2 id="免責"><a href="https://hackmd.io/pqYt6WqgReuZX3Nlr0svCw?view#%E5%85%8D%E8%B2%AC"></a>免責</h2>



<p>一応、今回プログラム等は試験的に実装した物なのでガチでセンシティブなファイルの転送には使わないで下さい。&nbsp;<sup><a href="#annotate-3" id="to-annotate-3">[3]</a></sup></p>



<h2 id="共通鍵暗号と公開鍵暗号"><a href="https://hackmd.io/pqYt6WqgReuZX3Nlr0svCw?view#%E5%85%B1%E9%80%9A%E9%8D%B5%E6%9A%97%E5%8F%B7%E3%81%A8%E5%85%AC%E9%96%8B%E9%8D%B5%E6%9A%97%E5%8F%B7"></a>共通鍵暗号と公開鍵暗号</h2>



<p>インターネット上でよく使う暗号化の方法としては主にこの2種類があると思います。それぞれの特徴を、OpenSSLでの実行例を添えて紹介します。</p>



<p><strong>共通鍵暗号</strong></p>



<p>暗号化時と復号時&nbsp;<sup><a id="to-annotate-4" href="#annotate-4">[4]</a></sup>&nbsp;に使う鍵が一緒のタイプです。パスワード付きZIPやWi-Fiでもおなじみの、一般的によく使われる暗号化方式かと思います。</p>



<p>ちなみにここで言う鍵というのは復号の方法を表す情報と言う事になります。したがって、例えば以下のような物も共通鍵暗号と言えます。</p>


<pre class="language-plain hljs title: ; notranslate" title="">
暗号：ハテネオヌヅモカナキワソブソア
平文：ヒトノカネデヤキニクヲタベタイ（人の金で焼き肉を食べたい）
鍵：1文字ずつ50音の1つ前のカナに変換
</pre>


<p>特徴としては、（当たり前ですが）暗号化したデータと共に、暗号化に使った鍵もどうにかして転送する必要があります。<sup><a id="to-annotate-5" href="#annotate-5">[5]</a></sup></p>



<p>以下は、OpenSSLでの使用例です。<br>まずは暗号化から。以下は “Secret Message!!” と言う平文のメッセージを、AES-256-CBC (共通鍵暗号の一種) を使ってパスワード (鍵) “hogehoge” で暗号化し、標準出力に結果を出力します:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
$ echo 'Secret Message!!' | openssl enc -aes-256-cbc -salt -k hogehoge -base64

U2FsdGVkX1+mdCMdi+jRV7bwJaSm+LxUjnTax98O9ZWSa/s45UHmzagIF+Nt6nqp
</pre>


<p><code>-salt</code>&nbsp;をつけると実行する度に異なる結果が得られ安全です（デフォルトで有効）。また、出力結果を見やすくする為に今回はbase64化して出力しています。</p>



<p>続いてこのメッセージを復号してみましょう。<br>逆の手順で今度はbase64デコードした後、AES-256-CBCで同じ鍵で復号を行います:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
$ echo 'U2FsdGVkX1+mdCMdi+jRV7bwJaSm+LxUjnTax98O9ZWSa/s45UHmzagIF+Nt6nqp' | openssl enc -d -aes-256-cbc -k hogehoge -base64

Secret Message!!
</pre>


<p>無事メッセージを戻す事ができました！</p>



<p><strong>公開鍵暗号</strong></p>



<p>共通鍵暗号とは対象的に、暗号化と復号で異なる2つの鍵（鍵ペア）を使います。受信側が予め鍵ペアを作り、片方の鍵を “公開鍵” として送信側に渡します。送信者はそれを使い暗号化を行い、受信側に転送します。受信者はデータを受け取った後、所有するもう一方の鍵 “秘密鍵” を使って復号を行います。<br>公開鍵暗号では、公開鍵で暗号化したデータは、秘密鍵でしか復号できない為、公開鍵の転送は安全な手段を用いる必要はありません。この性質から、安全にデータの転送が可能となります。<sup><a id="to-annotate-6" href="#annotate-6">[6]</a></sup></p>



<p>因みに有名な公開鍵暗号アルゴリズムのRSAでは、巨大な2つの素数を掛け合わした数値に対する、素因数分解の困難性を安全性の根拠としています。</p>



<p>それでは、実際にOpenSSLを使ってそのRSAを使って暗号化＆復号を試してみましょう。</p>



<p>まずは鍵ペアを生成します。以下は、2048bitのRSA秘密鍵 (公開不可の方) を作り、<code>private.pem</code>に保存します:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
$ openssl genrsa -out private.pem 2048

Generating RSA private key, 2048 bit long modulus
..............................................................................................+++
........+++
e is 65537 (0x10001)
</pre>


<p>続いて、この秘密鍵から公開鍵を取り出します。秘密鍵には公開鍵の情報が入っている為、いつでも公開鍵の生成が可能です&nbsp;<sup><a id="to-annotate-7" href="#annotate-7">[7]</a></sup>:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
$ openssl rsa -in private.pem -outform PEM -pubout -out public.pem

writing RSA key
</pre>


<p>それではこの鍵ペアを使って実際に暗号化を行います。以下は、“Secret Message!!” と言うメッセージをRSAの公開鍵で暗号化し、base64に変換し結果を標準出力に出力します:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
$ echo 'Secret Message!!' | openssl rsautl -encrypt -inkey public.pem -pubin | base64

qUkeauQ7dCdfZENyBICyhG5xSVwGDFfltoFU1jsJ21nGVPaOoKp6xk7b6mVzkf+zx6mypH7ARcWRO4Ki/DcSsRXZgUqv0jeEdLJTz2XPjf72hwL+sZCcQBkrHb/uY9ztYzOkeyIBZzZbl7QrQdyIPmJL248UR6sEQwtQz+U4c25yuQtmyno5a1+Ae2xBPJJZZy1xZlmOuW5KarGeCliRU5ya6GwEdWoRSuO4zLgsFYmPP/l0ItGBL/uo+dTFuNpbcdZiRZ3V52rnR2L8txf2EKv5gMkbB+kt46wtQp5CsnON8/VhuHBK8q1HwiAD29DxIMZSAqtCnHVZbpdmkbwc5A==
</pre>


<p><code>-pubin</code>&nbsp;は公開鍵を使う事を明示します。省略した場合、OpenSSLは秘密鍵が入力されている事を期待して暗号化を行う (実際には、先述の保持されている公開鍵が使われる) ので、エラーとなってしまうので注意が必要です。</p>



<p>念の為、本当に公開鍵で復号できないか試してみましょう。以下は、先程のbase64メッセージをデコードして、公開鍵を使って復号を試みます:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
$ echo 'qUkeauQ7dCdfZENyBICyhG5xSVwGDFfltoFU1jsJ21nGVPaOoKp6xk7b6mVzkf+zx6mypH7ARcWRO4Ki/DcSsRXZgUqv0jeEdLJTz2XPjf72hwL+sZCcQBkrHb/uY9ztYzOkeyIBZzZbl7QrQdyIPmJL248UR6sEQwtQz+U4c25yuQtmyno5a1+Ae2xBPJJZZy1xZlmOuW5KarGeCliRU5ya6GwEdWoRSuO4zLgsFYmPP/l0ItGBL/uo+dTFuNpbcdZiRZ3V52rnR2L8txf2EKv5gMkbB+kt46wtQp5CsnON8/VhuHBK8q1HwiAD29DxIMZSAqtCnHVZbpdmkbwc5A==' | base64 --decode | \
  openssl rsautl -decrypt -inkey public.pem -pubin

A private key is needed for this operation
</pre>


<p>無事（？）怒られました。では今度は指示に従って秘密鍵を使いましょう:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
$ echo 'qUkeauQ7dCdfZENyBICyhG5xSVwGDFfltoFU1jsJ21nGVPaOoKp6xk7b6mVzkf+zx6mypH7ARcWRO4Ki/DcSsRXZgUqv0jeEdLJTz2XPjf72hwL+sZCcQBkrHb/uY9ztYzOkeyIBZzZbl7QrQdyIPmJL248UR6sEQwtQz+U4c25yuQtmyno5a1+Ae2xBPJJZZy1xZlmOuW5KarGeCliRU5ya6GwEdWoRSuO4zLgsFYmPP/l0ItGBL/uo+dTFuNpbcdZiRZ3V52rnR2L8txf2EKv5gMkbB+kt46wtQp5CsnON8/VhuHBK8q1HwiAD29DxIMZSAqtCnHVZbpdmkbwc5A==' | base64 --decode | \
  openssl rsautl -decrypt -inkey private.pem

Secret Message!!
</pre>


<p>無事に戻す事ができましたね♪</p>



<h2 id="2つの手法を組み合わせる"><a href="https://hackmd.io/pqYt6WqgReuZX3Nlr0svCw?view#2%E3%81%A4%E3%81%AE%E6%89%8B%E6%B3%95%E3%82%92%E7%B5%84%E3%81%BF%E5%90%88%E3%82%8F%E3%81%9B%E3%82%8B"></a>2つの手法を組み合わせる</h2>



<p>ここで勘の良い方なら、「公開鍵暗号最強やん！共通鍵暗号の存在意義って・・・」と思うかもしれません。が、公開鍵暗号だけを使うのは難しい理由があります。それは、RSAを使った公開鍵暗号では、もとのメッセージは鍵長以下である必要があると言う制約があるからです。<br>例えば先程の例のように2048bit (256バイト) の鍵長であれば、256バイトまでのデータしか暗号化できません。更に言えば、デフォルトにもなっている <code>PKCS #1 v1.5 padding</code> と言うパディングが入るため、 (<a rel="noreferrer noopener" href="https://tools.ietf.org/html/rfc2313" target="_blank">RFC-2313</a>によると) 更に11バイト低い、245バイトまでが上限となります。</p>



<p>この様な制限から、実際のデータの通信にはRSAは不向きと言えます。そこで、ファイル自体の暗号化にはサイズの制約の少ない共通鍵暗号を使い、その鍵自体を公開鍵暗号を使って暗号化する事で、安全に暗号データと、その復号の為のキーを受信者に送付する事が可能となります。<sup><a id="to-annotate-8" href="#annotate-8">[8]</a></sup></p>



<h2 id="実際にやってみた"><a href="https://hackmd.io/pqYt6WqgReuZX3Nlr0svCw?view#%E5%AE%9F%E9%9A%9B%E3%81%AB%E3%82%84%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F"></a>実際にやってみた</h2>



<p>長くなりましたがいよいよ本題です。先程書いた通り、2つの暗号化方式を組み合わせますので、具体的なフローしては次のような形になります:</p>



<ol><li><strong>受信者</strong>: 公開鍵暗号 (RSA) の鍵ペアを生成</li><li><strong>受信者</strong>: 1の「公開鍵」を送信者に送付</li><li><strong>送信者</strong>: 256bit (32バイト) 長のランダム値を生成。これを共通鍵暗号 (AES) の鍵とする</li><li><strong>送信者</strong>: 3で作った「共通鍵」で、送信したい機密データを暗号化する</li><li><strong>送信者</strong>: 3で作った「共通鍵」を、2で受け取った「公開鍵」で暗号化する</li><li><strong>送信者</strong>: 4と5を受信者に送付</li><li><strong>受信者</strong>: 6で受け取った「共通鍵」を、1で生成した「秘密鍵」で復号する</li><li><strong>受信者</strong>: 6で受け取った暗号データを、7で復号した「共通鍵」で復号する</li></ol>



<p>自分が送信者の場合、事前に受信相手にRSA秘密鍵を生成してもらう必要がありますが、相手がGitHubのユーザーで、かつSSHの認証用にRSAの鍵を登録している場合、手間が省けます。<br>何故ならユーザーが登録している公開鍵は、誰でも参照が可能だからです。因みに僕の鍵の場合、以下となります:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
$ curl -s https://github.com/issei-m.keys

ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC8EfkPUlQE7/z8chnxgmmRX1efaPLO3AKLpXlasPSU/T4eQjahIwz2AC8jowGIXfiUZG2QLgSbMzRkzJC59FAXGzF+ty3VIMMxrA37h2NGuAstr7snzOODx3jph+tJjPZoMx07PGLN4JYysv8eZ/C7ULihdRLBsImQNOStEFNVVm7zNKF0LbvaVuAsbgtpd8L0OaeTWMWEok5K/QRNunnRb6p/q45EyHpN0gWFCByp3pXPu3/QVJTprr/Y1T93uhAZwL1EmB8vHbwAwbb9L/+TOUeY2IXxoykuhhZpXz+0HD9p6iNcv5ABDJNhKMEjjfNq2gKWhc7G2bQwiRT9ELjOvuChBq2ITqw/KaDklORqHK8fzsvPZIe6Rmf9zwNUJPAng360m81kLsWrTiaGA2iR8jKAk0sElPIvNpopFx/VX2rk/RMBptK0zHbZ3X1qFw5ReQ7NFbg3nHSO3po9C463PphDt8HBNoBunzqH40q+XXe7cDvvX4u8ShapJSFdcB1VHUiRm/HRkJaun4Iq2R00oZURcV49NEnB9z2l+0UtqKZHj78l7UBDMe/pa4vrrmbxiUZoB1msrnhrnXW+lytZAHEvTow4RTM5U/14mxbwhs6s4F8ljci4P/0YnH7WBvd9xR/f6M21LM6WWXGvCv+92xYd9DSBjb8z8G35J1Tm1w==
</pre>


<p>尚、この形式のままだとOpenSSLで使えませんので、使える形式に変換しておきます。これに関してはOpenSSHと言う、名前はそっくりですが別のライブラリの機能を使う必要があります。</p>



<p>以下は、GitHubから取得した&nbsp;<code>issei-m</code>&nbsp;の鍵をOpenSSLで使えるPKCS8形式に変換し、<code>./issei-m.pem</code>&nbsp;に保存します:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
$ curl -s https://github.com/issei-m.keys &gt; /tmp/issei-m.key
$ ssh-keygen -f /tmp/issei-m.key -e -m PKCS8 | tee -a issei-m.pem

-----BEGIN RSA PUBLIC KEY-----
MIICCgKCAgEAvBH5D1JUBO/8/HIZ8YJpkV9Xn2jyztwCi6V5WrD0lP0+HkI2oSMM
9gAvI6MBiF34lGRtkC4EmzM0ZMyQufRQFxsxfrct1SDDMawN+4djRrgLLa+7J8zj
g8d46YfrSYz2aDMdOzxizeCWMrL/Hmfwu1C4oXUSwbCJkDTkrRBTVVZu8zShdC27
2lbgLG4LaXfC9Dmnk1jFhKJOSv0ETbp50W+qf6uORMh6TdIFhQgcqd6Vz7t/0FSU
6a6/2NU/d7oQGcC9RJgfLx28AMG2/S//kzlHmNiF8aMpLoYWaV8/tBw/aeojXL+Q
AQyTYSjBI43zatoCloXOxtm0MIkU/RC4zr7goQatiE6sPymg5JTkahyvH87Lz2SH
ukZn/c8DVCTwJ4N+tJvNZC7Fq04mhgNokfIygJNLBJTyLzaaKRcf1V9q5P0TAabS
tMx22d19ahcOUXkOzRW4N5x0jt6aPQuOtz6YQ7fBwTaAbp86h+NKvl13u3A771+L
vEoWqSUhXXAdVR1IkZvx0ZCWrp+CKtkdNKGVEXFePTRJwfc9pftFLaimR4+/Je1A
QzHv6WuL665m8YlGaAdZrK54a511vpcrWQBxL06MOEUzOVP9eJsW8IbOrOBfJY3I
uD/9GJx+1gb3fcUf3+jNtSzOlllxrwr/vdsWHfQ0gY2/M/Bt+SdU5tcCAwEAAQ==
-----END RSA PUBLIC KEY-----
</pre>


<p>これで準備ができました。<br>さて、今回は先述のフローの3〜8までの手順を自動化するBashスクリプトを書きましたのでそちらを使います。</p>



<p><a href="https://raw.githubusercontent.com/issei-m/openssl-command-tests/master/file-encrypter" target="_blank" rel="noreferrer noopener">file-encrypter &#8211; github.com/issei-m/openssl-command-tests</a></p>



<p>暗号化の場合は次のようにして実行します:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
$ ./file-encrypter enc RSA公開鍵ファイル名 暗号化したいファイル名
</pre>


<p>実際に、もばらぶのロゴを先程の僕の鍵で暗号化してみましょう。まずはロゴをDLします:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
$ curl -s -O http://mobalab.net/images/logo.png
</pre>


<div class="wp-block-image"><figure class="aligncenter"><img src="https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/02/image.png?w=1200&#038;ssl=1" alt="" class="wp-image-584" srcset="https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/02/image.png?w=570&amp;ssl=1 570w, https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/02/image.png?resize=300%2C146&amp;ssl=1 300w" sizes="(max-width: 570px) 100vw, 570px" data-recalc-dims="1" /><figcaption>もばらぶロゴ</figcaption></figure></div>



<p>一応md5も見てみましょう:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
$ md5 logo.png
MD5 (logo.png) = 71869c2dad963c935638ba1f227428d6
</pre>


<p>続いて&nbsp;<code>file-encrypter</code>&nbsp;スクリプトで暗号化を行います。</p>


<pre class="language-plain hljs title: ; notranslate" title="">
$ ./file-encrypter enc ./issei-m.pem /path/to/logo.png             
Encrypted into: ./logo.png.enc
</pre>


<p><code>./[元のファイル名].enc</code>&nbsp;と言う名前で出力されるので、今回は&nbsp;<code>./logo.png.enc</code>&nbsp;に出力されました。<br>この1ファイルの中に、暗号化したAESの鍵と暗号化した本文が含まれているので、後はこのファイルを相手に送付するだけです。</p>



<p>それでは受け取り側を想定して復号を行います。復号も暗号の時とほぼ同じインターフェースです:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
$ ./file-encrypter dec RSA秘密鍵ファイル名 復号したいファイル名
</pre>


<p>暗号化に使ったGitHubに登録している僕の鍵の秘密鍵は、唯一僕のマシンの中にだけありますので、それを使って復号を行います:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
# 元のファイルがあると「すでに同名のファイルが有るよ」と怒られるので予め削除しておく事
$ ./file-encrypter dec /path/to/issei-m-private.pem ./logo.png.enc 
Decrypted into: ./logo.png
</pre>


<p>無事に元のファイル名でファイルが作られました。MD5を取ってみましょう:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
$ md5 logo.png
MD5 (logo.png) = 71869c2dad963c935638ba1f227428d6
</pre>


<p>先ほどと一緒ですね。と言う事で、復号は無事にできました！</p>



<div class="wp-block-image"><figure class="aligncenter"><img src="https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/02/image-2.png?w=1200&#038;ssl=1" alt="" class="wp-image-586" srcset="https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/02/image-2.png?w=570&amp;ssl=1 570w, https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/02/image-2.png?resize=300%2C146&amp;ssl=1 300w" sizes="(max-width: 570px) 100vw, 570px" data-recalc-dims="1" /><figcaption>無事復活を遂げたもばらぶロゴ</figcaption></figure></div>



<h2 id="おわりに"><a href="https://hackmd.io/pqYt6WqgReuZX3Nlr0svCw?view#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB"></a>おわりに</h2>



<p>今回、TLS等でも使われている様な、暗号化のフローの一部をOpenSSLを使って検証してみました。<br>今回はシェルスクリプトを使いましたが、OpenSSL用のライブラリがあれば当然他の言語でも実装が可能ですので、興味がある方は試してみて下さい。</p>



<h2 id="参考"><a href="https://hackmd.io/pqYt6WqgReuZX3Nlr0svCw?view#%E5%8F%82%E8%80%83"></a>参考</h2>



<ul><li class=""><a href="https://en.wikipedia.org/wiki/RSA_(cryptosystem)" target="_blank" rel="noreferrer noopener">https://en.wikipedia.org/wiki/RSA_(cryptosystem)</a></li><li class=""><a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard" target="_blank" rel="noreferrer noopener">https://en.wikipedia.org/wiki/Advanced_Encryption_Standard</a></li><li class=""><a href="https://www.openssl.org/docs/man1.0.2/man1/" target="_blank" rel="noreferrer noopener">https://www.openssl.org/docs/man1.0.2/man1/</a></li><li class=""><a href="https://www.devco.net/archives/2006/02/13/public_-_private_key_encryption_using_openssl.php" target="_blank" rel="noreferrer noopener">https://www.devco.net/archives/2006/02/13/public_-_private_key_encryption_using_openssl.php</a></li><li class=""><a href="https://man.openbsd.org/ssh-keygen.1" target="_blank" rel="noreferrer noopener">https://man.openbsd.org/ssh-keygen.1</a></li></ul>



<hr class="wp-block-separator"/>



<ol><li id="annotate-1">インシデントに気づいて速攻でサービスを停止できればOKですが&nbsp;<a href="#to-annotate-1">↩︎</a></li><li id="annotate-2">実際にS3での事故はたまに<a rel="noreferrer noopener" href="https://www.upguard.com/breaches/verizon-cloud-leak" target="_blank">見ます</a>&nbsp;<a href="#to-annotate-2">↩︎</a></li><li id="annotate-3">よく検証されてる＆使いやすいツールがインターネット上にはたくさんあるのでそちらを使って下さい&nbsp;<a href="#to-annotate-3">↩︎</a></li><li id="annotate-4">どうでもいいですが、暗号化の対語として「復号化」は<a rel="noreferrer noopener" href="https://qiita.com/shojit/items/13ef9deebcae71a4f0cb" target="_blank">誤りらしい</a>です。個人的には通じればどちらでもOK派ですが&nbsp;<a href="#to-annotate-4">↩︎</a>
    </li><li id="annotate-5">インターネット上では原則的に安全にファイルの送受信が困難な為に暗号処理を使いますが、共通鍵暗号の場合、結局その鍵自体にも同じ課題が課され、ジレンマになります&nbsp;<a href="#to-annotate-5">↩︎</a>
    </li><li id="annotate-6">因みに公開鍵暗号は南京錠によく例えられます。解錠した南京錠を使って誰でもロックを掛ける事ができますが、解錠だけは鍵の所有者だけが可能だからです&nbsp;<a href="#to-annotate-6">↩︎</a></li><li id="annotate-7">当たり前ですが逆 (公開鍵から秘密鍵を取り出す) は不可能です&nbsp;<a href="#to-annotate-7">↩︎</a></li><li id="annotate-8">普段私達がWebで使っているTLSでも同様のフローが使われています&nbsp;<a href="#to-annotate-8">↩︎</a></li></ol>
</div><p class="post__date-and-author">February 18, 2019 - posted by <a href="/author/issei">issei_m</a></p><div style="margin-top:4rem"><div><h3>Tags</h3><div class="tag__container"><div class="tag__item"><a class="tag__link" href="/tags/aes/">AES</a></div><div class="tag__item"><a class="tag__link" href="/tags/cryptography/">Cryptography</a></div><div class="tag__item"><a class="tag__link" href="/tags/openssl/">OpenSSL</a></div><div class="tag__item"><a class="tag__link" href="/tags/rsa/">RSA</a></div><div class="tag__item"><a class="tag__link" href="/tags/security/">Security</a></div></div></div></div></section><section class="section"><div class="sharing-buttons"><button aria-label="facebook" class="react-share__ShareButton sharing-buttons__item" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#3b5998"></circle><path d="M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z" fill="white"></path></svg></button><button aria-label="twitter" class="react-share__ShareButton sharing-buttons__item" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="email" class="react-share__ShareButton sharing-buttons__item" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#7f7f7f"></circle><path d="M17,22v20h30V22H17z M41.1,25L32,32.1L22.9,25H41.1z M20,39V26.6l12,9.3l12-9.3V39H20z" fill="white"></path></svg></button></div></section><section class="section"><div class="post-link"><a class="post-link__left" href="/2019/02/25/use-multiple-aws-accounts-in-serverless/"><h3 class="post-link__title">← 前の投稿</h3><p class="post-link__link-text">Serverless で複数の AWS アカウントを使用する</p></a><a class="post-link__right" href="/2019/02/17/react-native-cameraで画像を正方形で保存する方法/"><h3 class="post-link__title">次の投稿 →</h3><p class="post-link__link-text">React Native Cameraで画像を正方形で保存する方法</p></a></div></section><section class="section section--gray"><a class="banner__image-wrapper" href="https://mobalab.net/recruit/" target="_blank" rel="noopener noreferrer"><img class="banner__image banner__image--medium" src="/img/recruit-banner-medium.jpg" alt="we are hiring"/></a><h2>優秀な技術者と一緒に、好きな場所で働きませんか</h2><p>株式会社もばらぶでは、優秀で意欲に溢れる方を常に求めています。働く場所は自由、働く時間も柔軟に選択可能です。</p><p>現在、以下の職種を募集中です。ご興味のある方は、リンク先をご参照下さい。</p><ul><li><a href="https://mobalab.net/recruit/" target="_blank" rel="noopener noreferrer">ソフトウェアエンジニア</a></li><li><a href="https://mobalab.net/recruit/" target="_blank" rel="noopener noreferrer">デザイナー</a></li><li><a href="https://mobalab.net/recruit/" target="_blank" rel="noopener noreferrer">プロジェクトマネージャー</a></li></ul></section><section class="section"></section><section class="section"><div><h3>コメントを残す</h3><form class="comment-form"><input type="text" class="comment-form__input" name="name" placeholder="お名前（必須）"/><input type="text" class="comment-form__input" name="email" placeholder="メールアドレス(必須・公開されません)"/><textarea class="comment-form__input" name="body" cols="39" rows="4" placeholder="コメント（必須）"></textarea><button class="comment-form__button" type="submit">コメントを送信</button></form></div></section></div></div><aside class="sidebar-container"><div class="widget"><div class="widget__contents"><a class="banner__image-wrapper" href="https://mobalab.net/recruit/" target="_blank" rel="noopener noreferrer"><img class="banner__image" src="/img/recruit-banner-medium.jpg" alt="we are hiring"/></a></div></div><div class="widget"><h4 class="widget__title">最近の投稿</h4><div class="widget__contents"><ul><li><a href="/2020/09/24/scala-error-handling-option-either">Scala の Option, Either とエラー処理</a></li><li><a href="/2020/09/23/%e9%9d%99%e7%9a%84%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9%e3%81%a8%e5%8b%95%e7%9a%84%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9%ef%bc%88spark-sql%e3%81%ae%e5%b0%8f%e3%83%8d">静的データベースと動的データベース（Spark SQLの小ネタ）</a></li><li><a href="/2020/09/17/kedro%e8%a7%a6%e3%81%a3%e3%81%a6%e3%81%bf%e3%81%9f">kedro触ってみた</a></li><li><a href="/2020/09/16/bert%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6%e5%8b%89%e5%bc%b7%e3%81%97%e3%81%9f%e3%81%93%e3%81%a8%e3%81%be%e3%81%a8%e3%82%81-3-%e8%87%aa%e5%b7%b1%e6%95%99%e5%b8%ab%e5%ad%a6%e7%bf%92%e3%81%a8%e6%b1%8e">BERTについて勉強したことまとめ (3) 自己教師学習と汎用性について</a></li><li><a href="/2020/09/15/manage-aks-secrets-with-azure-key-vault">AKS上のKubernetesの秘匿情報をAzure Key Vaultで管理する方法</a></li></ul></div></div><div class="widget"><h4 class="widget__title">アーカイブ</h4><div class="widget__contents"><ul><li><a href="/archives/2020/09">2020年09月</a></li><li><a href="/archives/2020/08">2020年08月</a></li><li><a href="/archives/2020/07">2020年07月</a></li><li><a href="/archives/2020/06">2020年06月</a></li><li><a href="/archives/2020/05">2020年05月</a></li><li><a href="/archives/2020/04">2020年04月</a></li><li><a href="/archives/2020/03">2020年03月</a></li><li><a href="/archives/2020/02">2020年02月</a></li><li><a href="/archives/2019/12">2019年12月</a></li><li><a href="/archives/2019/11">2019年11月</a></li><li><a href="/archives/2019/10">2019年10月</a></li><li><a href="/archives/2019/09">2019年09月</a></li><li><a href="/archives/2019/08">2019年08月</a></li><li><a href="/archives/2019/07">2019年07月</a></li><li><a href="/archives/2019/06">2019年06月</a></li><li><a href="/archives/2019/05">2019年05月</a></li><li><a href="/archives/2019/04">2019年04月</a></li><li><a href="/archives/2019/03">2019年03月</a></li><li><a href="/archives/2019/02">2019年02月</a></li><li><a href="/archives/2019/01">2019年01月</a></li><li><a href="/archives/2018/12">2018年12月</a></li><li><a href="/archives/2018/11">2018年11月</a></li><li><a href="/archives/2018/10">2018年10月</a></li><li><a href="/archives/2018/09">2018年09月</a></li><li><a href="/archives/2018/08">2018年08月</a></li><li><a href="/archives/2018/07">2018年07月</a></li><li><a href="/archives/2018/06">2018年06月</a></li><li><a href="/archives/2018/05">2018年05月</a></li><li><a href="/archives/2018/01">2018年01月</a></li><li><a href="/archives/2017/12">2017年12月</a></li><li><a href="/archives/2017/11">2017年11月</a></li></ul></div></div><div class="widget"><h4 class="widget__title">タグ</h4><div class="widget__contents"><div class="tag__container"><div class="tag__item"><a href="/tags/aws/">aws (19)</a></div><div class="tag__item"><a href="/tags/lambda/">lambda (10)</a></div><div class="tag__item"><a href="/tags/scala/">scala (8)</a></div><div class="tag__item"><a href="/tags/serverless/">serverless (7)</a></div><div class="tag__item"><a href="/tags/s3/">s3 (5)</a></div><div class="tag__item"><a href="/tags/機械学習/">機械学習 (5)</a></div><div class="tag__item"><a href="/tags/mod_wsgi/">mod_wsgi (4)</a></div><div class="tag__item"><a href="/tags/ruby-on-rails/">ruby-on-rails (4)</a></div><div class="tag__item"><a href="/tags/spark/">spark (4)</a></div><div class="tag__item"><a href="/tags/ansible/">ansible (3)</a></div><div class="tag__item"><a href="/tags/cli/">cli (3)</a></div><div class="tag__item"><a href="/tags/docker/">docker (3)</a></div><div class="tag__item"><a href="/tags/java/">java (3)</a></div><div class="tag__item"><a href="/tags/kubernetes/">kubernetes (3)</a></div><div class="tag__item"><a href="/tags/laravel/">laravel (3)</a></div><div class="tag__item"><a href="/tags/node-js/">node-js (3)</a></div><div class="tag__item"><a href="/tags/python/">python (3)</a></div><div class="tag__item"><a href="/tags/rails/">rails (3)</a></div><div class="tag__item"><a href="/tags/react-native/">react-native (3)</a></div><div class="tag__item"><a href="/tags/scraping/">scraping (3)</a></div><div class="tag__item"><a href="/tags/terraform/">terraform (3)</a></div><div class="tag__item"><a href="/tags/自然言語処理/">自然言語処理 (3)</a></div><div class="tag__item"><a href="/tags/aws-cli/">aws-cli (2)</a></div><div class="tag__item"><a href="/tags/aws-deep-learning-ami/">aws-deep-learning-ami (2)</a></div><div class="tag__item"><a href="/tags/azure/">azure (2)</a></div><div class="tag__item"><a href="/tags/bert/">bert (2)</a></div><div class="tag__item"><a href="/tags/bug/">bug (2)</a></div><div class="tag__item"><a href="/tags/centos/">centos (2)</a></div><div class="tag__item"><a href="/tags/collection/">collection (2)</a></div><div class="tag__item"><a href="/tags/database/">database (2)</a></div><div class="tag__item"><a href="/tags/debug/">debug (2)</a></div><div class="tag__item"><a href="/tags/ec2/">ec2 (2)</a></div><div class="tag__item"><a href="/tags/eks/">eks (2)</a></div><div class="tag__item"><a href="/tags/github/">github (2)</a></div><div class="tag__item"><a href="/tags/iam/">iam (2)</a></div><div class="tag__item"><a href="/tags/javascript/">javascript (2)</a></div><div class="tag__item"><a href="/tags/k8s/">k8s (2)</a></div><div class="tag__item"><a href="/tags/kinesis/">kinesis (2)</a></div><div class="tag__item"><a href="/tags/machine-learning/">machine-learning (2)</a></div><div class="tag__item"><a href="/tags/nlp/">nlp (2)</a></div><div class="tag__item"><a href="/tags/openssl/">openssl (2)</a></div><div class="tag__item"><a href="/tags/option/">option (2)</a></div><div class="tag__item"><a href="/tags/php/">php (2)</a></div><div class="tag__item"><a href="/tags/rds/">rds (2)</a></div><div class="tag__item"><a href="/tags/ruby/">ruby (2)</a></div><div class="tag__item"><a href="/tags/security/">security (2)</a></div><div class="tag__item"><a href="/tags/typescript/">typescript (2)</a></div><div class="tag__item"><a href="/tags/ubuntu/">ubuntu (2)</a></div><div class="tag__item"><a href="/tags/vagrant/">vagrant (2)</a></div><div class="tag__item"><a href="/tags/virtualbox/">virtualbox (2)</a></div><div class="tag__item"><a href="/tags/windows/">windows (2)</a></div></div></div></div></aside></div></main><footer class="footer"><div class="footer__inner container"><div class="footer__logo-wrapper"><img class="footer__logo-image" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNDAgMjQwIj48cG9seWdvbiBwb2ludHM9IjAgMjYuNjcgMTMuMzMgMjYuNjcgMTMuMzMgNDAgMCA0MCAwIDY2LjY3IDEzLjMzIDY2LjY3IDEzLjMzIDEwNi42NyAxMDYuNjcgMTA2LjY3IDEwNi42NyA4MCA0MCA4MCA0MCA2Ni42NyAxMDYuNjcgNjYuNjcgMTA2LjY3IDQwIDQwIDQwIDQwIDI2LjY3IDEwNi42NyAyNi42NyAxMDYuNjcgMCAwIDAgMCAyNi42NyIvPjxyZWN0IHg9IjQwIiB5PSIxMzMuMzMiIHdpZHRoPSI2Ni42NyIgaGVpZ2h0PSIyNi42NyIvPjxwb2x5Z29uIHBvaW50cz0iMjYuNjcgMTMzLjMzIDAgMTMzLjMzIDAgMjAwIDI2LjY3IDIwMCA4MCAyMDAgODAgMjEzLjMzIDAgMjEzLjMzIDAgMjQwIDEwNi42NyAyNDAgMTA2LjY3IDE3My4zMyAyNi42NyAxNzMuMzMgMjYuNjcgMTMzLjMzIi8+PHBvbHlnb24gcG9pbnRzPSIxMzMuMzMgMTYwIDE3My4zMyAxNjAgMTczLjMzIDI0MCAyMDAgMjQwIDIwMCAxMzMuMzMgMTMzLjMzIDEzMy4zMyAxMzMuMzMgMTYwIi8+PHJlY3QgeD0iMTMzLjMzIiB5PSIxNzMuMzMiIHdpZHRoPSIyNi42NyIgaGVpZ2h0PSI2Ni42NyIvPjxyZWN0IHg9IjIxMy4zMyIgeT0iMTczLjMzIiB3aWR0aD0iMjYuNjciIGhlaWdodD0iNjYuNjciLz48cmVjdCB4PSIyMDYuNjciIHk9IjEzMy4zMyIgd2lkdGg9IjEzLjMzIiBoZWlnaHQ9IjEzLjMzIi8+PHJlY3QgeD0iMjI2LjY3IiB5PSIxMzMuMzMiIHdpZHRoPSIxMy4zMyIgaGVpZ2h0PSIxMy4zMyIvPjxyZWN0IHg9IjEzMy4zMyIgd2lkdGg9IjI2LjY3IiBoZWlnaHQ9IjEwNi42NyIvPjxyZWN0IHg9IjIwNi42NyIgd2lkdGg9IjEzLjMzIiBoZWlnaHQ9IjEzLjMzIi8+PHJlY3QgeD0iMjI2LjY3IiB3aWR0aD0iMTMuMzMiIGhlaWdodD0iMTMuMzMiLz48cGF0aCBkPSJNMjAwLDBIMTczLjMzVjI2LjY3aDQwVjQwaC00MHY2Ni42N0gyNDBWMjBIMjAwWm0xMy4zMyw4MEgyMDBWNjYuNjdoMTMuMzNaIi8+PC9zdmc+" alt="もばらぶ"/></div><div class="footer__column-container"><div class="footer__column"><h4 class="footer__column-title">会社概要</h4><p>株式会社もばらぶ</p><p>設立: 2013年6月</p></div><div class="footer__column"><h4 class="footer__column-title">業務内容</h4><p><a href="https://mobalab.net/services/" target="_blank" rel="noopener noreferrer">Webサービス開発</a></p><p><a href="https://mobalab.net/services/" target="_blank" rel="noopener noreferrer">自社サービス</a></p><p><a href="https://mobalab.net/services/" target="_blank" rel="noopener noreferrer">受託開発</a></p><p><a href="https://mobalab.net/services/" target="_blank" rel="noopener noreferrer">中小企業のIT化支援</a></p></div><div class="footer__column"><h4 class="footer__column-title">リンク</h4><p><a href="https://mobalab.net" target="_blank" rel="noopener noreferrer">株式会社もばらぶウェブサイト</a></p><p><a href="https://blog.mobalab.net/" target="_blank" rel="noopener noreferrer">公式ブログ「もばらぶん」</a></p></div><div class="footer__column"><h4 class="footer__column-title">採用情報</h4><p><a href="https://mobalab.net/recruit/" target="_blank" rel="noopener noreferrer">プロジェクトマネージャー(リモート)</a></p><p><a href="https://mobalab.net/recruit/" target="_blank" rel="noopener noreferrer">ソフトウェアエンジニア(リモート)</a></p><p><a href="https://mobalab.net/recruit/" target="_blank" rel="noopener noreferrer">デザイナー(リモート)</a></p></div></div></div><div class="footer__bottom-area"><div class="footer__copyright">© Mobalab, KK 2020</div></div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2019/02/18/experiment-of-open-ssl-for-secure-file-transfer/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-388f3e9c75b1616484c3.js"],"component---src-pages-404-js":["/component---src-pages-404-js-3ecfa6f461f2fbf8d1cf.js"],"component---src-templates-author-js":["/component---src-templates-author-js-96473aa85a451f46bba7.js"],"component---src-templates-blog-js":["/component---src-templates-blog-js-e0cd2f4e8a1b4d4c024c.js"],"component---src-templates-category-js":["/component---src-templates-category-js-8327246dc1124f94d530.js"],"component---src-templates-monthly-archive-js":["/component---src-templates-monthly-archive-js-5426866dd5a885424923.js"],"component---src-templates-page-js":["/component---src-templates-page-js-ffa75515ea9d1f8efb9a.js"],"component---src-templates-post-js":["/component---src-templates-post-js-9fbfa639a23c74cb9bb9.js"],"component---src-templates-tag-js":["/component---src-templates-tag-js-28e85cb989fb8ce86070.js"]};/*]]>*/</script><script src="/component---src-templates-post-js-9fbfa639a23c74cb9bb9.js" async=""></script><script src="/commons-e1b0c49c3875256839c2.js" async=""></script><script src="/2852872c-266d0f544f9db0fe515a.js" async=""></script><script src="/29107295-3eadfd8d28513cbe1d99.js" async=""></script><script src="/styles-da2d348018617ad0abdc.js" async=""></script><script src="/app-388f3e9c75b1616484c3.js" async=""></script><script src="/framework-d53df25ab0068ecd1ffc.js" async=""></script><script src="/webpack-runtime-de1f906f2eeac1e4d45f.js" async=""></script></body></html>