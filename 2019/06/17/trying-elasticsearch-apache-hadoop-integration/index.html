<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.f96b5d4417f78d72b46c.css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{-webkit-box-sizing:content-box;box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{-webkit-box-sizing:border-box;box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-box-sizing:border-box;box-sizing:border-box}*,:after,:before{-webkit-box-sizing:inherit;box-sizing:inherit}body{color:#4a4a4a;line-height:1.5;font-family:BlinkMacSystemFont,-apple-system,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif}h1,h2,h3,h4,h5{color:#2d2d2d;font-weight:700;line-height:1.125}a{text-decoration:none;word-break:break-all}img{height:auto;max-width:100%}code,pre{-moz-osx-font-smoothing:auto;-webkit-font-smoothing:auto}pre{background-color:#f1f1f1;font-size:.9rem;overflow:auto;padding:18px 25px!important}code{background-color:#f5f5f5;color:#f14668;font-family:monospace;font-size:1.2rem;font-weight:400;padding:.25em .5em;word-break:break-all}.hljs>code{background-color:unset;color:unset;font-family:unset;font-size:unset;font-weight:unset;padding:unset;word-break:unset}*{-webkit-box-sizing:border-box;box-sizing:border-box}.main-inner{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 auto;max-width:90%;padding-bottom:50px;width:1500px}@media screen and (max-width:767px){.main-inner{max-width:100%}}.container{height:100%;margin:0 auto;max-width:90%;width:1500px}.contents-container{width:75%}@media screen and (max-width:767px){.contents-container{width:100%}}.sidebar-container{width:25%}@media screen and (max-width:767px){.sidebar-container{width:100%}}.section{padding:30px 15px}.section--gray{background-color:#f5f5f5}.banner__image-wrapper{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}.banner__image{max-width:300px;width:100%}.banner__image--medium{max-width:600px;padding:15px 30px}.button{border:1px solid #dbdbdb;color:#363636;cursor:pointer;-ms-flex-pack:center;justify-content:center;padding:calc(.5em - 1px) 1em;text-align:center;white-space:nowrap}.button--small{border-radius:2px;font-size:.75rem}.comment__item{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;margin:30px 0}.comment__item-upper{-ms-flex-align:baseline;align-items:baseline;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:justify;justify-content:space-between}.comment__name{font-weight:700}.comment__date{font-size:.85em}.comment__child-container{padding-left:30px}.comment__reply-button{-ms-flex-item-align:start;align-self:flex-start;background:none;border:none;color:#13c4a5;cursor:pointer;font-size:.85em;margin:5px 0;padding:0;text-align:left}.comment__reply-button:focus{outline:none!important}.comment-form{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;max-width:600px}.comment-form__input{border:1px solid #dadada;border-radius:3px;margin:5px 0;padding:5px}.comment-form__sent-message{color:#13c4a5}.comment-form__error-message{color:#ff3030}.comment-form__button{border:none;border-radius:3px;cursor:pointer;height:40px;margin:5px 0}.comment-form__button--sending{opacity:.5}.comment-form__button:focus{outline:none!important}.comment-form__spinner-wrapper{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}.comment-form__spinner{background-color:#13c4a5}.footer{background-color:#333;color:#eee}.footer__inner{display:-ms-flexbox;display:flex;padding-top:50px;padding-bottom:50px}@media screen and (max-width:767px){.footer__inner{-ms-flex-direction:column-reverse;flex-direction:column-reverse;padding-top:15px}}.footer__column-container{display:-ms-flexbox;display:flex;-ms-flex:1 1;flex:1 1;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:distribute;justify-content:space-around}.footer__column{margin:0 10px}@media screen and (max-width:1199px){.footer__column{margin-top:40px;padding-left:15px;width:40%}}@media screen and (max-width:767px){.footer__column{margin-top:40px;padding-left:15px;width:100%}}.footer__column-title{border-bottom:2px solid #13c4a5;color:#eee;display:inline-block;font-size:1.2rem;line-height:1.4rem;margin-bottom:15px;margin-top:0}.footer a{color:#eee}.footer__bottom-area{-ms-flex-direction:column;flex-direction:column}.footer__bottom-area,.footer__logo-wrapper{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}.footer__logo-wrapper{padding:0 50px}@media screen and (max-width:1199px){.footer__logo-wrapper{padding:0 80px}}@media screen and (max-width:767px){.footer__logo-wrapper{padding:60px 0 30px}}.footer__logo-image{height:120px;width:120px}.footer__copyright{color:#828282;font-size:.8rem;height:30px;line-height:30px}.header{background-color:#fff;border-bottom:1px solid #eee;font-size:1.1rem;width:100%;z-index:10}.header a{color:#4a4a4a}.header__upper{border-bottom:1px solid #eee;height:40px}.header__upper.isFixed{display:none}@media screen and (max-width:767px){.header__upper{height:60px}}.header__upper-inner{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;padding-left:30px}@media screen and (max-width:767px){.header__upper-inner{padding-left:0}}.header__subtitle{margin:0 0 0 15px}@media screen and (max-width:767px){.header__subtitle{font-size:1rem;margin:0 auto;text-align:center}}.header__main{height:75px}.header__main.isFixed{height:40px}@media screen and (max-width:767px){.header__main{height:110px}}.header__main-inner{display:-ms-flexbox;display:flex;padding-left:45px}@media screen and (max-width:767px){.header__main-inner{padding-left:0}}.header__logo-link{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex}@media screen and (max-width:767px){.header__logo-link{-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:space-evenly;justify-content:space-evenly;padding:5px 0;width:100%}}.header__logo-image{height:40px;width:40px}.header__logo-image.isFixed{height:25px;width:25px}.header__logo-text{font-size:1.8rem;margin:0 30px}@media screen and (max-width:767px){.header__logo-text{font-size:1.2rem}}.header__logo-text.isFixed{font-size:1.2rem;margin:0 15px}.header__link-container{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;margin-left:20px}@media screen and (max-width:767px){.header__link-container{display:none}}.header__link{margin:0 15px}.pagination{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:center;justify-content:center;padding:0 30px}.pagination__item{border:1px solid #e4e4e4;border-radius:3px;color:#13c4a5;margin:0 4px 10px}.pagination__dots{color:#2d2d2d}.pagination a{color:#2d2d2d;display:block}.pagination__non-link-content,.pagination a{height:100%;padding:5px 15px;width:100%}.post-link{display:-ms-flexbox;display:flex}.post-link__left{padding-right:10px}.post-link__left,.post-link__right{text-decoration:none!important;width:50%}.post-link__right{padding-left:10px}.post-link__link-text,.post-link__title{text-decoration:none}.post-list{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:start;justify-content:flex-start;width:100%}.post-list__section-title{font-size:1.3rem;margin-bottom:30px;margin-left:-2%;margin-top:0;text-align:center}.post-list__item-wrapper{display:block;width:31%;margin-right:2%;margin-bottom:20px;-webkit-transition:all .3s ease-out;transition:all .3s ease-out}@media screen and (max-width:1023px){.post-list__item-wrapper{margin-left:1%;margin-right:1%;width:48%}}@media screen and (max-width:575px){.post-list__item-wrapper{margin-right:0;width:100%}}.post-list__item-wrapper:hover{-webkit-transform:scale(1.04);transform:scale(1.04)}.post-list__item{border:1px solid #f1f1f1;border-radius:6px;-webkit-box-shadow:0 7px 14px rgba(0,0,0,.07);box-shadow:0 7px 14px rgba(0,0,0,.07);display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%}.post-list__thumbnail{border-radius:6px 6px 0 0;width:100%;padding-bottom:65%;background-position:50%;background-repeat:no-repeat}.post-list__main-area{color:#2d2d2d;display:-ms-flexbox;display:flex;-ms-flex:1 1;flex:1 1;-ms-flex-direction:column;flex-direction:column;padding:15px}.post-list__title{font-size:1.1rem;font-weight:700;line-height:1.5;margin:15px 0}.post-list__small{color:grey;font-size:.8rem;margin:0}.post-list__small a{color:#13c4a5}.post-list__excerpt{margin-top:15px}.post-list__excerpt p{margin:0}.post-list__button-area{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;margin-top:auto;padding-top:10px}.post{line-height:1.7;padding-left:50px;padding-right:50px;font-size:1.1rem}@media screen and (max-width:575px){.post{padding:0}}.post__title{font-size:2.5em!important;margin-top:40px!important}.post__date-and-author{color:grey;margin:30px 0}.post__top-image-wrapper{display:-ms-flexbox;display:flex;max-height:400px;min-height:300px;-ms-flex-pack:center;justify-content:center}.post__top-image{max-height:400px;-o-object-fit:contain;object-fit:contain}.post h2{font-size:1.75em;margin-top:40px;margin-bottom:20px}.post h3,.post h4{margin-top:30px;margin-bottom:15px}.post a{color:#13c4a5;text-decoration:underline}.post a:hover{color:#18d3b1}.post *{word-break:break-word}.sharing-buttons__item{margin:0 3px}.tag__container{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.tag__item{-ms-flex-align:center;align-items:center;background-color:#f3f3f3;border-radius:4px;display:-ms-inline-flexbox;display:inline-flex;font-size:.75rem;height:2em;-ms-flex-pack:center;justify-content:center;line-height:1.5;margin:6px 10px 6px 0;padding-left:.75em;padding-right:.75em;white-space:nowrap}.tag__link{color:#4a4a4a!important;text-decoration:none!important}.widget{margin-bottom:50px;margin-top:50px;padding-left:15px;padding-right:15px}@media screen and (max-width:767px){.widget{padding-left:50px;padding-right:50px}}@media screen and (max-width:575px){.widget{padding-left:15px;padding-right:15px}}.widget__title{font-size:1.2rem}.widget ul{list-style:none;padding-left:0}.widget li{border-top:1px solid #e9e9e9;padding:.7rem 0}.widget li:last-child{border-bottom:1px solid #e9e9e9}.widget a{color:#4a4a4a}.hljs{display:block;overflow-x:auto;padding:.5em;background:#232323;color:#e6e1dc}.hljs-comment,.hljs-quote{color:#bc9458;font-style:italic}.hljs-keyword,.hljs-selector-tag{color:#c26230}.hljs-number,.hljs-regexp,.hljs-string,.hljs-template-variable,.hljs-variable{color:#a5c261}.hljs-subst{color:#519f50}.hljs-name,.hljs-tag{color:#e8bf6a}.hljs-type{color:#da4939}.hljs-attr,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-link,.hljs-symbol{color:#6d9cbe}.hljs-params{color:#d0d0ff}.hljs-attribute{color:#cda869}.hljs-meta{color:#9b859d}.hljs-section,.hljs-title{color:#ffc66d}.hljs-addition{background-color:#144212}.hljs-addition,.hljs-deletion{color:#e6e1dc;display:inline-block;width:100%}.hljs-deletion{background-color:#600}.hljs-selector-class{color:#9b703f}.hljs-selector-id{color:#8b98ab}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><meta name="generator" content="Gatsby 2.21.21"/><title data-react-helmet="true">Elasticsearch for Apache Hadoopã‚’ä½¿ã£ã¦Sparkã‹ã‚‰Amazon ESã«ãƒ‡ãƒ¼ã‚¿ã¨é€£æºã—ã¦ã¿ãŸ â€“ ã‚‚ã°ã‚‰ã¶ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ–ãƒ­ã‚°</title><meta data-react-helmet="true" name="robots" content="noindex, nofollow"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:site_name" content="ã‚‚ã°ã‚‰ã¶ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ–ãƒ­ã‚°"/><meta data-react-helmet="true" property="og:locale" content="ja_JP"/><meta data-react-helmet="true" name="twitter:creator" content="@mobalab"/><meta data-react-helmet="true" name="twitter:site" content="@mobalab"/><meta data-react-helmet="true" name="description" content="ä»Šã¨ã‚ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã€Amazon EMRã‚’ä½¿ã£ã¦å°‘ã—å¤§ãã‚ãªãƒœãƒªãƒ¥ãƒ¼ãƒ ã®ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚’ã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€ãã®ä¸­ã®ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã®ä¸­èº«ã‚’Webãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ãƒ‹ã‚¢ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ãŸã„ã¨è¨€ã†è¦æœ›ãŒã‚ã‚Šã€ãã®åŸºç›¤ã¨ã—ã¦ ...
"/><meta data-react-helmet="true" property="og:title" content="Elasticsearch for Apache Hadoopã‚’ä½¿ã£ã¦Sparkã‹ã‚‰Amazon ESã«ãƒ‡ãƒ¼ã‚¿ã¨é€£æºã—ã¦ã¿ãŸ"/><meta data-react-helmet="true" property="og:description" content="ä»Šã¨ã‚ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã€Amazon EMRã‚’ä½¿ã£ã¦å°‘ã—å¤§ãã‚ãªãƒœãƒªãƒ¥ãƒ¼ãƒ ã®ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚’ã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€ãã®ä¸­ã®ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã®ä¸­èº«ã‚’Webãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ãƒ‹ã‚¢ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ãŸã„ã¨è¨€ã†è¦æœ›ãŒã‚ã‚Šã€ãã®åŸºç›¤ã¨ã—ã¦ ...
"/><meta data-react-helmet="true" property="og:url"/><meta data-react-helmet="true" property="og:image" content="https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/06/es_spark.png?fit=768%2C308&amp;ssl=1"/><link as="script" rel="preload" href="/webpack-runtime-de1f906f2eeac1e4d45f.js"/><link as="script" rel="preload" href="/framework-d53df25ab0068ecd1ffc.js"/><link as="script" rel="preload" href="/app-388f3e9c75b1616484c3.js"/><link as="script" rel="preload" href="/styles-da2d348018617ad0abdc.js"/><link as="script" rel="preload" href="/29107295-3eadfd8d28513cbe1d99.js"/><link as="script" rel="preload" href="/2852872c-266d0f544f9db0fe515a.js"/><link as="script" rel="preload" href="/commons-e1b0c49c3875256839c2.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-9fbfa639a23c74cb9bb9.js"/><link as="fetch" rel="preload" href="/page-data/2019/06/17/trying-elasticsearch-apache-hadoop-integration/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="header"><div class="header__upper "><div class="header__upper-inner container"><p class="header__subtitle">ãƒªãƒ¢ãƒ¼ãƒˆé–‹ç™ºãƒ¡ã‚¤ãƒ³ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºä¼æ¥­ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ–ãƒ­ã‚°ã§ã™</p></div></div><div class="header__main "><div class="header__main-inner container"><a class="header__logo-link" href="/"><img class="header__logo-image " src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNDAgMjQwIj48cG9seWdvbiBwb2ludHM9IjAgMjYuNjcgMTMuMzMgMjYuNjcgMTMuMzMgNDAgMCA0MCAwIDY2LjY3IDEzLjMzIDY2LjY3IDEzLjMzIDEwNi42NyAxMDYuNjcgMTA2LjY3IDEwNi42NyA4MCA0MCA4MCA0MCA2Ni42NyAxMDYuNjcgNjYuNjcgMTA2LjY3IDQwIDQwIDQwIDQwIDI2LjY3IDEwNi42NyAyNi42NyAxMDYuNjcgMCAwIDAgMCAyNi42NyIvPjxyZWN0IHg9IjQwIiB5PSIxMzMuMzMiIHdpZHRoPSI2Ni42NyIgaGVpZ2h0PSIyNi42NyIvPjxwb2x5Z29uIHBvaW50cz0iMjYuNjcgMTMzLjMzIDAgMTMzLjMzIDAgMjAwIDI2LjY3IDIwMCA4MCAyMDAgODAgMjEzLjMzIDAgMjEzLjMzIDAgMjQwIDEwNi42NyAyNDAgMTA2LjY3IDE3My4zMyAyNi42NyAxNzMuMzMgMjYuNjcgMTMzLjMzIi8+PHBvbHlnb24gcG9pbnRzPSIxMzMuMzMgMTYwIDE3My4zMyAxNjAgMTczLjMzIDI0MCAyMDAgMjQwIDIwMCAxMzMuMzMgMTMzLjMzIDEzMy4zMyAxMzMuMzMgMTYwIi8+PHJlY3QgeD0iMTMzLjMzIiB5PSIxNzMuMzMiIHdpZHRoPSIyNi42NyIgaGVpZ2h0PSI2Ni42NyIvPjxyZWN0IHg9IjIxMy4zMyIgeT0iMTczLjMzIiB3aWR0aD0iMjYuNjciIGhlaWdodD0iNjYuNjciLz48cmVjdCB4PSIyMDYuNjciIHk9IjEzMy4zMyIgd2lkdGg9IjEzLjMzIiBoZWlnaHQ9IjEzLjMzIi8+PHJlY3QgeD0iMjI2LjY3IiB5PSIxMzMuMzMiIHdpZHRoPSIxMy4zMyIgaGVpZ2h0PSIxMy4zMyIvPjxyZWN0IHg9IjEzMy4zMyIgd2lkdGg9IjI2LjY3IiBoZWlnaHQ9IjEwNi42NyIvPjxyZWN0IHg9IjIwNi42NyIgd2lkdGg9IjEzLjMzIiBoZWlnaHQ9IjEzLjMzIi8+PHJlY3QgeD0iMjI2LjY3IiB3aWR0aD0iMTMuMzMiIGhlaWdodD0iMTMuMzMiLz48cGF0aCBkPSJNMjAwLDBIMTczLjMzVjI2LjY3aDQwVjQwaC00MHY2Ni42N0gyNDBWMjBIMjAwWm0xMy4zMyw4MEgyMDBWNjYuNjdoMTMuMzNaIi8+PC9zdmc+" alt="ã‚‚ã°ã‚‰ã¶"/><p class="header__logo-text ">ã‚‚ã°ã‚‰ã¶ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ–ãƒ­ã‚°</p></a><div class="header__link-container"><a class="header__link" href="/">Home</a><a class="header__link" href="https://mobalab.net/recruit/" rel="noopener noreferrer" target="_blank">æ¡ç”¨æƒ…å ±</a><a class="header__link" href="/categories/en">English</a></div></div></div></header><main class="main"><div class="main-inner" style="margin-top:0"><div class="contents-container"><div class="post"><section class="section"><div class="post__top-image-wrapper"><img src="https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/06/es_spark.png?fit=768%2C308&amp;ssl=1" alt="" class="post__top-image"/></div><h1 class="post__title">Elasticsearch for Apache Hadoopã‚’ä½¿ã£ã¦Sparkã‹ã‚‰Amazon ESã«ãƒ‡ãƒ¼ã‚¿ã¨é€£æºã—ã¦ã¿ãŸ</h1><p class="post__date-and-author">June 17, 2019 - posted by <a href="/author/issei">issei_m</a></p><div>
<p>ä»Šã¨ã‚ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã€Amazon EMRã‚’ä½¿ã£ã¦å°‘ã—å¤§ãã‚ãªãƒœãƒªãƒ¥ãƒ¼ãƒ ã®ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚’ã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€ãã®ä¸­ã®ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã®ä¸­èº«ã‚’Webãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ãƒ‹ã‚¢ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ãŸã„ã¨è¨€ã†è¦æœ›ãŒã‚ã‚Šã€ãã®åŸºç›¤ã¨ã—ã¦Elasticsearchã‚’æ¡ç”¨ã™ã‚‹äº‹ã«ã—ã¾ã—ãŸã€‚</p>



<p>å‰æã¨ã—ã¦ã¯ã€ã–ã£ãã‚Šè¨€ã†ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªç’°å¢ƒã§ã™:</p>



<ul><li class="">å¯¾è±¡ãƒ‡ãƒ¼ã‚¿ã®ç·ãƒœãƒªãƒ¥ãƒ¼ãƒ ã¯5.5å„„ãƒ¬ã‚³ãƒ¼ãƒ‰<ul><li class="">ãŸã ã—ç‰¹å®šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§é›†è¨ˆã‚’è¡Œã†ã®ã§ã€Elasticsearchã«å…¥ã‚Œã‚‹ãƒ«ãƒ¼ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ•°ã§ã„ã†ã¨3000ä¸‡ç¨‹åº¦</li></ul></li><li class="">ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°é »åº¦ã¯1æ—¥ã«1åº¦<ul><li class="">æ¥µç«¯ã«è¨€ãˆã°24æ™‚é–“ä»¥å†…ã«å‡¦ç†ãŒçµ‚ã‚ã‚Œã°OKã¨è¨€ã†äº‹</li></ul></li><li class="">ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°ã¨ã¯åˆ¥ã§ã€1æ—¥ã«1åº¦ã€äºˆã‚ä¿å­˜ã—ãŸã‚¯ã‚¨ãƒªæ¡ä»¶ã«ãƒãƒƒãƒã™ã‚‹ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’Parquetã§æ›¸ãè¾¼ã‚€ã¨è¨€ã†è¦ä»¶ã‚‚ã‚ã‚‹</li><li class="">Elasticsearchã¯VPCå†…ã®Amazon ES (Elasticsearch Service) ç®¡ç†ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ä½¿ç”¨<ul><li class="">ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼è¶Šã—ã«ã—ã‹é€šä¿¡ã§ããªã„</li><li class="">ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ³ã—ãŸElasticsearchã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯åŸ·ç­†æ™‚ç‚¹ã§æœ€æ–°ç‰ˆã®6.7</li></ul></li></ul>



<h2 id="Elasticsearchã«ã¤ã„ã¦"><a href="https://hackmd.io/Cw5kP4jZRVuLN_kpOESqSw?view#Elasticsearch%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"></a>Elasticsearchã«ã¤ã„ã¦</h2>



<p>ãƒ‡ãƒ¼ã‚¿ã®æŠ•å…¥æ–¹æ³•ä»¥å‰ã«ã€ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¨ã—ã¦äº‹å‰ã«æƒ³å®šãƒœãƒªãƒ¥ãƒ¼ãƒ æ•°ã§æ¤œè¨¼ã—ãŸçµæœã€Elasticsearchã§ã‚ã‚Œã°ï¼ˆãƒœãƒªãƒ¥ãƒ¼ãƒ çš„ã«å½“ç„¶ã§ã™ãŒï¼‰å•é¡Œãªãæ¤œç´¢ãŒå¯èƒ½ã¨è¨€ã†äº‹ãŒåˆ†ã‹ã£ãŸã®ã§äº‹å‰ã«æ±ºå®šã—ã¦ã„ã¾ã—ãŸã€‚</p>



<p>ã‚¯ãƒ©ã‚¹ã‚¿ã¯å…ˆè¿°ã®é€šã‚ŠAmazon ESã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>



<h2 id="Sparkã«ã¤ã„ã¦"><a href="https://hackmd.io/Cw5kP4jZRVuLN_kpOESqSw?view#Spark%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"></a>Sparkã«ã¤ã„ã¦</h2>



<p>æŠ•å…¥æ–¹æ³•ã«ã¤ã„ã¦ã¯å…ˆè¿°ã®è¦ä»¶ãŒæº€ãŸã›ã‚Œã°ä½•ã§ã‚‚è‰¯ã‹ã£ãŸã®ã§ã™ãŒã€è‰²ã€…è©¦ã—ãŸçµæœã€ãã‚‚ãã‚‚EMRã§ã®ãƒ‡ãƒ¼ã‚¿å‡¦ç†è‡ªä½“ã«ã‚‚ä½¿ã£ã¦ã„ãŸäº‹ã‚‚ã‚ã£ã¦ã€SparkãŒè‰¯ã•ãã†ã¨è¨€ã†äº‹ã«ãªã‚Šã€ã“ã‚Œã«æ±ºå®šã—ã¾ã—ãŸã€‚</p>



<p>ã¾ãŸã€ä»Šå›åŒæ–¹ã®é€£æºã«ã¯ElasticsearchãŒæä¾›ã—ã¦ã„ã‚‹<a href="https://www.elastic.co/guide/en/elasticsearch/hadoop/6.7/reference.html" target="_blank" rel="noreferrer noopener">Elasticsearch for Apache Hadoop</a>ã¨è¨€ã†ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã„ã¾ã—ãŸã€‚<br>Sparkã¨Elasticsearchã‚’é€£æºã™ã‚‹ç‚ºã®APIãŒJARã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã«ã¾ã¨ã‚ã‚‰ã‚Œã¦ãŠã‚Šã€&nbsp;<a href="https://www.elastic.co/jp/downloads/hadoop" target="_blank" rel="noreferrer noopener">ã“ã“</a>ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒå¯èƒ½ã§ã™ã€‚</p>



<p>ãªãŠã€ä»Šå›ã¯Amazon ESã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒåŸ·ç­†æ™‚ç‚¹ã§æœ€æ–°ã§ã‚ã‚‹6.7ãªã®ã§ã€ãã‚Œã«ã‚ã‚ã›ã€<a rel="noreferrer noopener" href="https://www.elastic.co/jp/downloads/past-releases/elasticsearch-apache-hadoop-6-7-2" target="_blank">Elasticsearch for Apache Hadoop 6.7.2</a>ã‚’ä½¿ã„ã¾ã—ãŸã€‚</p>



<p>â€»å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯build.sbtã¨ã‹ã§ä¾å­˜ç®¡ç†ã‚’ã—ã¾ã™ãŒä»Šå›ã¯ãƒ†ã‚¹ãƒˆãªã®ã§ç›´æ¥ğŸ‘†ã®jarã‚’ä½¿ã„ã¾ã™ã€‚<br>â€»Maven Repositoryã®ãƒšãƒ¼ã‚¸ã¯:&nbsp;<a href="https://mvnrepository.com/artifact/org.elasticsearch/elasticsearch-hadoop/6.7.2" target="_blank" rel="noreferrer noopener">https://mvnrepository.com/artifact/org.elasticsearch/elasticsearch-hadoop/6.7.2</a></p>



<h2 id="è©¦ã—ã¦ã¿ã‚‹"><a href="https://hackmd.io/Cw5kP4jZRVuLN_kpOESqSw?view#%E8%A9%A6%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"></a>è©¦ã—ã¦ã¿ã‚‹</h2>



<p>äº‹å‰ã«ã€å…ˆç¨‹ğŸ‘†ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸJARã‚’S3ã®é©å½“ãªãƒã‚±ãƒƒãƒˆã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãŠãã¾ã™ã€‚</p>



<figure class="wp-block-image"><img src="https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/06/jar.png?w=1200&#038;ssl=1" alt="" class="wp-image-949" srcset="https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/06/jar.png?w=641&amp;ssl=1 641w, https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/06/jar.png?resize=300%2C285&amp;ssl=1 300w" sizes="(max-width: 641px) 100vw, 641px" data-recalc-dims="1" /><figcaption>elasticsearch-hadoop-6.7.2.jar</figcaption></figure>



<p>ãã®å¾Œã€EMRã§é©å½“ã«Sparkã®ã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œæˆã—ã¾ã™ã€‚ã“ã¡ã‚‰ã‚‚åŸ·ç­†æ™‚ç‚¹ã§æœ€æ–°ç‰ˆã® â€œSpark 2.4.0 on Hadoop 2.8.5 YARN with Ganglia 3.7.2 and Zeppelin 0.8.1â€ ã‚’é¸æŠã—ã¦ã„ã¾ã™:</p>



<figure class="wp-block-image"><img src="https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/06/emr-registration.png?w=1200&#038;ssl=1" alt="" class="wp-image-950" srcset="https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/06/emr-registration.png?w=689&amp;ssl=1 689w, https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/06/emr-registration.png?resize=300%2C153&amp;ssl=1 300w" sizes="(max-width: 689px) 100vw, 689px" data-recalc-dims="1" /><figcaption>EMRã‚¯ãƒ©ã‚¹ã‚¿ä½œæˆç”»é¢</figcaption></figure>



<p>ã‚¯ãƒ©ã‚¹ã‚¿ãŒReadyã«ãªã£ãŸã‚‰ã€SSHã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã™:</p>



<figure class="wp-block-image"><img src="https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/06/emr-console.png?w=1200&#038;ssl=1" alt="" class="wp-image-951" srcset="https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/06/emr-console.png?w=776&amp;ssl=1 776w, https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/06/emr-console.png?resize=300%2C186&amp;ssl=1 300w, https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/06/emr-console.png?resize=768%2C476&amp;ssl=1 768w" sizes="(max-width: 776px) 100vw, 776px" data-recalc-dims="1" /></figure>



<p>æ—©é€Ÿspark-shellã‚’èµ·å‹•ã—ã¾ã™ã€‚ã“ã®æ™‚ã€å…ˆç¨‹ç”¨æ„ã—ãŸJARã¨ã„ãã¤ã‹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã—ã¦ãŠãã¾ã™:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
$ spark-shell --jars s3://YOUR-BUCKET/elasticsearch-hadoop-6.7.2.jar \
  --conf spark.es.nodes=vpc-my-es-xxxxxxxxxxxxxxxxxxxxxxx.us-west-2.es.amazonaws.com \
  --conf spark.es.port=80 \
  --conf spark.es.nodes.wan.only=true
</pre>


<p>Elasticsearch for Apache Hadoopã§ã¯ã€<code>spark-shell</code>&nbsp;ã¾ãŸã¯&nbsp;<code>spark-submit</code>&nbsp;æ™‚ã«&nbsp;<code>spark.</code>&nbsp;æ¥é ­è¾ã‚’ä»˜ã‘ã‚‹äº‹ã§ã€ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³APIã®è¨­å®šã‚’æŒ‡å®šã™ã‚‹äº‹ãŒã§ãã¾ã™ã€‚<br>ä¾‹ãˆã°&nbsp;<code>spark.es.nodes</code>&nbsp;ã¯&nbsp;<code>es.nodes</code>&nbsp;ã¨è¨€ã†keyã§è¨­å®šãŒè¡Œã‚ã‚Œã¾ã™ã€‚ï¼ˆè¨­å®šã®ä¸€è¦§ã«ã¤ã„ã¦ã¯<a href="https://www.elastic.co/guide/en/elasticsearch/hadoop/6.7/configuration.html" target="_blank" rel="noreferrer noopener">å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã‚’å‚ç…§ã®äº‹ï¼‰</p>



<p>ä¸Šè¨˜ã®3ã¤ã®è¨­å®šã§ã™ãŒã€åŸ·ç­†æ™‚ç‚¹ã§ã¯Amazon ESã¨ã®ç–é€šã§ã¯å¿…é ˆã¨ãªã‚‹è¨­å®šã§ã™ã€‚Amazon ESã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ãƒãƒ¼ãƒ‰ã¯ç›´æ¥ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒå…¬é–‹ã•ã‚Œãšã€é€šä¿¡ã«ã¯å…¨ã¦&nbsp;<code>vpc-hogehoge-xxxxxxxxxxxxxxxxxxxxxxx.us-west-2.es.amazonaws.com</code>&nbsp;ã®ã‚ˆã†ãªãƒ‰ãƒ¡ã‚¤ãƒ³ã®ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ã‚’çµŒç”±ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<br>ã¾ãŸã€ãƒãƒ¼ãƒˆã«ã¤ã„ã¦ã‚‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®9200ã§ã¯ãªã80ãŒä½¿ã‚ã‚Œã¦ã‚‹ã®ã§ã€æŒ‡å®šã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<br>æœ€å¾Œã®&nbsp;<code>es.nodes.wan.only</code>&nbsp;ã§ã™ãŒã€ã“ã®APIãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æŒ™å‹•ã¨ã—ã¦ã€å„ãƒãƒ¼ãƒ‰ã¨å€‹åˆ¥ã«ã‚„ã‚Šå–ã‚Šã‚’ã™ã‚‹äº‹ã§åŠ¹ç‡åŒ–ã‚’å›³ã‚ã†ã¨ã™ã‚‹æŒ™å‹•ï¼ˆNode Discoveryï¼‰ã¨ãªã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€å…ˆè¿°ã®é€šã‚ŠAmazon ESã§ã¯ãã‚ŒãŒè¡Œãˆãªã„ã®ã§ã€ã“ã®è¨­å®šã§&nbsp;<code>true</code>&nbsp;ã‚’æ˜ç¤ºã—ã¦ãŠã‹ãªã„ã¨ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚</p>



<p>å°šã€è¨­å®šã¯Sparkã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•å¾Œã‚‚å€‹åˆ¥ã«è¨­å®šã‚’æŒ‡å®šã™ã‚‹äº‹ãŒã§ãã¾ã™ï¼ˆå¾Œè¿°ï¼‰ãŒã€ã“ã†è¨€ã†åŸºæœ¬çš„ãªè¨­å®šã¯èµ·å‹•æ™‚ã«è¨­å®šã—ã¦ã‚‚è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p>



<p>ã•ã¦ã€å…ˆç¨‹ã®&nbsp;<code>spark-shell</code>&nbsp;ãŒæˆåŠŸã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«replãŒèµ·å‹•ã—ã¾ã™:</p>



<figure class="wp-block-image"><img src="https://i0.wp.com/engineering.mobalab.net/wp-content/uploads/2019/06/repl.png?fit=680%2C246&amp;ssl=1" alt="" class="wp-image-952" srcset="https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/06/repl.png?w=1660&amp;ssl=1 1660w, https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/06/repl.png?resize=300%2C109&amp;ssl=1 300w, https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/06/repl.png?resize=768%2C279&amp;ssl=1 768w, https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2019/06/repl.png?resize=1024%2C371&amp;ssl=1 1024w" sizes="(max-width: 1200px) 100vw, 1200px" /></figure>



<h3 id="ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãè¾¼ã‚“ã§ã¿ã‚‹"><a href="https://hackmd.io/Cw5kP4jZRVuLN_kpOESqSw?view#%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E6%9B%B8%E3%81%8D%E8%BE%BC%E3%82%93%E3%81%A7%E3%81%BF%E3%82%8B"></a>ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãè¾¼ã‚“ã§ã¿ã‚‹</h3>



<p>æ—©é€Ÿã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
scala&gt; import org.elasticsearch.spark._

scala&gt; val inputData = Seq( Map(&quot;id&quot; -&gt; &quot;1&quot;, &quot;name&quot; -&gt; &quot;Alice&quot;), Map(&quot;id&quot; -&gt; &quot;2&quot;, &quot;name&quot; -&gt; &quot;Britney&quot;) )
inputData: Seq[scala.collection.immutable.Map[String,String]] = List(Map(id -&gt; 1, name -&gt; Alice), Map(id -&gt; 2, name -&gt; Britney))

scala&gt; sc.makeRDD(inputData).saveToEs(&quot;test-index/_doc&quot;)
</pre>


<p>ã“ã‚Œã¯ã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™:</p>



<ul><li class="">1è¡Œç›®ã®&nbsp;<code>import org.elasticsearch.spark._</code>&nbsp;ã‚’ import ã™ã‚‹äº‹ã§ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®SparkContextã‚’æ‹¡å¼µã—ã€<code>saveToEs</code>&nbsp;ãƒ¡ã‚½ãƒƒãƒ‰ãŒå®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™<ul><li class=""><code>org.elasticsearch.spark.rdd.EsSpark.saveToEs(rdd, indexName)</code>&nbsp;ã¨ã‚‚ã§ãã¾ã™</li></ul></li><li class="">2è¡Œç›®ã§å…¥åŠ›ç”¨JSONãƒ‡ãƒ¼ã‚¿ã®ä½œæˆ</li><li class="">3è¡Œç›®ã§ãƒ‡ãƒ¼ã‚¿ã‚’RDDåŒ–ã—ã€ãã®ã¾ã¾Elastcsearchã®ã‚¤ãƒ³ãƒ‡ã‚¯ã‚¹&nbsp;<code>test-index</code>&nbsp;ã®ã‚¿ã‚¤ãƒ—&nbsp;<code>_doc</code>ã«ä¿å­˜ã—ã¦ã„ã¾ã™</li></ul>



<p>ã“ã‚Œã§ã€2è¡Œã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
$ curl vpc-my-es-xxxxxxxxxxxxxxxxxxxxxxx.us-west-2.es.amazonaws.com/test-index/_search?pretty
{
  ...,
  &quot;hits&quot; : {
    ...,
    &quot;hits&quot; : [
      {
        &quot;_index&quot; : &quot;test-index&quot;,
        &quot;_type&quot; : &quot;_doc&quot;,
        &quot;_id&quot; : &quot;1aHaYGsB-_mWDM_3fLJ-&quot;,
        &quot;_score&quot; : 1.0,
        &quot;_source&quot; : {
          &quot;id&quot; : &quot;1&quot;,
          &quot;name&quot; : &quot;Alice&quot;
        }
      },
      {
        &quot;_index&quot; : &quot;test-index&quot;,
        &quot;_type&quot; : &quot;_doc&quot;,
        &quot;_id&quot; : &quot;1qHaYGsB-_mWDM_3gLJb&quot;,
        &quot;_score&quot; : 1.0,
        &quot;_source&quot; : {
          &quot;id&quot; : &quot;2&quot;,
          &quot;name&quot; : &quot;Britney&quot;
        }
      }
    ]
  }
}

</pre>


<h2 id="ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã¿ã‚‹"><a href="https://hackmd.io/Cw5kP4jZRVuLN_kpOESqSw?view#%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%82%93%E3%81%A7%E3%81%BF%E3%82%8B"></a>ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã¿ã‚‹</h2>



<p>åå¯¾ã«ã€Elasticsearchã«å…¥ã£ã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰DataFrameã‚’ä½œã£ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚ä»¥ä¸‹ã¯ã€å…ˆç¨‹æ›¸ãè¾¼ã‚“ã ã‚¤ãƒ³ãƒ‡ã‚¯ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
scala&gt; val dfFromEs = spark.read.format(&quot;es&quot;).load(&quot;test-index/_doc&quot;)
dfFromEs: org.apache.spark.sql.DataFrame = [id: string, name: string]

scala&gt; dfFromEs.printSchema
root
 |-- id: string (nullable = true)
 |-- name: string (nullable = true)
</pre>


<p><code>spark.read.format("es")</code>&nbsp;ã§ãƒªãƒ¼ãƒ€ãƒ¼ã‚’åˆæœŸåŒ–ã—ã¦ã€&nbsp;<code>.load(ã‚¤ãƒ³ãƒ‡ã‚¯ã‚¹å)</code>&nbsp;ã§èª­ã¿è¾¼ã‚€ã ã‘ã§ã™ã€‚<br>replã‹ã‚‰ã®å¿œç­”ã§åˆ†ã‹ã‚Šã¾ã™ãŒã€å…¥åŠ›ã—ãŸé€šã‚Šã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ§‹é€ ãŒå†ç¾ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€å®Ÿéš›ã«RDDåŒ–ã—ã¦collectã—ã¦ã¿ã¾ã—ã‚‡ã†:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
scala&gt; dfFromEs.rdd.map { case org.apache.spark.sql.Row(id: String, name: String) =&gt; Map(&quot;id&quot; -&gt; id, &quot;name&quot; -&gt; name) } .collect
resN: Array[scala.collection.immutable.Map[String,String]] = Array(Map(id -&gt; 2, name -&gt; Britney), Map(id -&gt; 1, name -&gt; Alice))
</pre>


<p>ç„¡äº‹å–å¾—ã™ã‚‹äº‹ãŒã§ãã¾ã—ãŸã€‚</p>



<h2 id="è¨­å®šã«ã¤ã„ã¦"><a href="https://hackmd.io/Cw5kP4jZRVuLN_kpOESqSw?view#%E8%A8%AD%E5%AE%9A%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"></a>è¨­å®šã«ã¤ã„ã¦</h2>



<p>ã•ã¦ã€<code>spark-shell</code>&nbsp;å®Ÿè¡Œæ™‚ã«ã„ãã¤ã‹è¨­å®šã‚’æŒ‡å®šã—ãŸã¨æ€ã„ã¾ã™ãŒã€è¨­å®šã¯å„ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œæ™‚ã«ã‚‚ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰æŒ‡å®šã™ã‚‹äº‹ãŒå¯èƒ½ã§ã™ã€‚</p>



<p><strong>æ›¸ãè¾¼ã¿æ™‚</strong></p>



<p>ä¾‹ãˆã°ã€å…ˆç¨‹ã®æ›¸ãè¾¼ã¿ä¾‹ã®JSONã«ãŠã„ã¦ã€&nbsp;<code>id</code>&nbsp;ã‚’Elasticsearchã®ãƒ¡ã‚¿ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ã‚ã‚‹&nbsp;<code>_id</code>&nbsp;ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã€ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°å¯èƒ½ã«ã—ãŸã„ã¨ã—ã¾ã™ã€‚<br>ã¾ãŸã€ãã®éš›ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè‡ªä½“ã‹ã‚‰ã¯&nbsp;<code>id</code>&nbsp;ã‚’å‰Šé™¤ã—ã¦ã¿ã¾ã—ã‚‡ã†:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
scala&gt; val inputData = Seq( Map(&quot;id&quot; -&gt; &quot;1&quot;, &quot;name&quot; -&gt; &quot;Alice&quot;), Map(&quot;id&quot; -&gt; &quot;2&quot;, &quot;name&quot; -&gt; &quot;Britney&quot;) )
inputData: Seq[scala.collection.immutable.Map[String,String]] = List(Map(id -&gt; 1, name -&gt; Alice), Map(id -&gt; 2, name -&gt; Britney))

scala&gt; sc.makeRDD(inputData).saveToEs(&quot;test-index-v2/_doc&quot;, Map( &quot;es.mapping.id&quot; -&gt; &quot;id&quot;, &quot;es.mapping.exclude&quot; -&gt; &quot;id&quot; ))
</pre>


<p><code>saveToEs</code>&nbsp;ã®ç¬¬2å¼•æ•°ï¼ˆ<code>org.elasticsearch.spark.rdd.EsSpark.saveToEs</code>&nbsp;ã®å ´åˆã¯ç¬¬3å¼•æ•°ï¼‰ã«Mapã§è¨­å®šã‚’è¿½åŠ æŒ‡å®šã™ã‚‹äº‹ãŒå¯èƒ½ã§ã€ã“ã®è¨­å®šã¯&nbsp;<code>spark-shell</code>&nbsp;å®Ÿè¡Œæ™‚ã«æŒ‡å®šã—ãŸè¨­å®šã¨ãƒãƒ¼ã‚¸ã•ã‚Œã¾ã™ã€‚<br>ã¡ãªã¿ã«<code>es.mapping.id</code> ã§ã¯ã‚¨ãƒ³ãƒˆãƒªã®ã©ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ <code>_id</code> ã«ãƒãƒƒãƒ—ã™ã‚‹ã‹ã€ã¾ãŸ <code>es.mapping.exclude</code> ã§ã¯ã©ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ›¸ãè¾¼ã¿å¯¾è±¡ã‹ã‚‰å¤–ã™ã‹ã‚’ãã‚Œãã‚ŒæŒ‡å®šã§ãã¾ã™ã€‚</p>



<p>å®Ÿéš›ã«ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
$ curl vpc-my-es-xxxxxxxxxxxxxxxxxxxxxxx.us-west-2.es.amazonaws.com/test-index-v2/_search?pretty
{
  ...,
  &quot;hits&quot; : {
    ...,
    &quot;hits&quot; : [
      {
        &quot;_index&quot; : &quot;test-index-v2&quot;,
        &quot;_type&quot; : &quot;_doc&quot;,
        &quot;_id&quot; : &quot;2&quot;,
        &quot;_score&quot; : 1.0,
        &quot;_source&quot; : {
          &quot;name&quot; : &quot;Britney&quot;
        }
      },
      {
        &quot;_index&quot; : &quot;test-index-v2&quot;,
        &quot;_type&quot; : &quot;_doc&quot;,
        &quot;_id&quot; : &quot;1&quot;,
        &quot;_score&quot; : 1.0,
        &quot;_source&quot; : {
          &quot;name&quot; : &quot;Alice&quot;
        }
      }
    ]
  }
}
</pre>


<p>æƒ³å®šã—ãŸé€šã‚Šãƒ‡ãƒ¼ã‚¿ãŒå…¥ã£ã¦ã„ã¾ã™ã€‚ã¾ãŸã€å®Ÿè¡Œçµæœã¯å‰²æ„›ã—ã¾ã™ãŒã€å…ˆç¨‹è¿°ã¹ãŸé€šã‚Š&nbsp;<code>_id</code>&nbsp;ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã®ã§ã€æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°ã‚’è¡Œã†äº‹ãŒã§ãã¾ã™ã€‚</p>



<p><strong>èª­ã¿è¾¼ã¿æ™‚</strong></p>



<p>èª­ã¿è¾¼ã¿æ™‚ã«ã‚‚åŒæ§˜ã®äº‹ãŒå¯èƒ½ã§ã™ã€‚ä¾‹ãˆã°ã€å…ˆç¨‹&nbsp;<code>_id</code>&nbsp;ã‚’æŒ‡å®šã—ã¦æ›¸ãè¾¼ã‚“ã æ–¹ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè‡ªä½“ã¯&nbsp;<code>id</code>&nbsp;ã‚’å«ã‚ãªã„ã‚ˆã†ã«ã—ã¾ã—ãŸãŒã€ã“ã®ã¾ã¾ã ã¨DataFrameå´ã§idãŒå‚ç…§ã§ããšä¸ä¾¿ãªäº‹ãŒã‚ã‚Šã¾ã™ã€‚<br>ãã“ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ã« <code>es.read.metadata</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«<code>true</code>ã‚’æŒ‡å®šã—ã¦èª­ã¿è¾¼ã‚“ã§ã¿ã¾ã—ã‚‡ã†:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
scala&gt; val dfFromEs = spark.read.format(&quot;es&quot;).options(Map( &quot;es.read.metadata&quot; -&gt; &quot;true&quot; )).load(&quot;test-index-v2/_doc&quot;)
dfFromEs: org.apache.spark.sql.DataFrame = [name: string, _metadata: map&lt;string,string&gt;]

scala&gt; dfFromEs.printSchema
root
 |-- name: string (nullable = true)
 |-- _metadata: map (nullable = true)
 |    |-- key: string
 |    |-- value: string (valueContainsNull = true)
</pre>


<p>å…ˆç¨‹ã¨ã¯ç•°ãªã‚Šã€&nbsp;<code>_metadata</code>&nbsp;ã¨è¨€ã†ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå…¥ã‚Œå­ã«ãªã£ã¦ã„ã¾ã™ã€‚<br>ã“ã“ã«&nbsp;<code>_id</code>&nbsp;ã‚„ã‚‰&nbsp;<code>_type</code>&nbsp;ãŒå…¥ã£ã¦ã„ã‚‹ã®ã§ã€ä¾‹ãˆã°å…¥åŠ›æ™‚ã®Mapã‚’å†ç¾ã—ãŸã„å ´åˆã€RDDåŒ–ã—ã¦ã‹ã‚‰å–ã‚Šå‡ºã—ã¦ã‚‚ã„ã„ã§ã™ã—ã€æ¬¡ã®ã‚ˆã†ã«ã—ã¦DataFrameä¸Šã§ã‚«ãƒ©ãƒ åŒ–ã—ã¦ãŠãäº‹ã‚‚ã§ãã¾ã™:</p>


<pre class="language-plain hljs title: ; notranslate" title="">
scala&gt; dfFromEs.select(col(&quot;_metadata&quot;)(&quot;_id&quot;).alias(&quot;id&quot;), col(&quot;name&quot;)).rdd.map { case org.apache.spark.sql.Row(id: String, name: String) =&gt; Map(&quot;id&quot; -&gt; id, &quot;name&quot; -&gt; name) } .collect
resN: Array[scala.collection.immutable.Map[String,String]] = Array(Map(id -&gt; 2, name -&gt; Britney!!), Map(id -&gt; 1, name -&gt; Alice))
</pre>


<h2 id="ãŠã™ã™ã‚ã®è¨­å®š"><a href="https://hackmd.io/Cw5kP4jZRVuLN_kpOESqSw?view#%E3%81%8A%E3%81%99%E3%81%99%E3%82%81%E3%81%AE%E8%A8%AD%E5%AE%9A"></a>ãŠã™ã™ã‚ã®è¨­å®š</h2>



<p>è¨­å®šã«ã¤ã„ã¦æ—¢ã«ã„ãã¤ã‹è¿°ã¹ã¾ã—ãŸãŒã€ä»Šå›ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ã¯æ›´ã«ä»¥ä¸‹ã®è¨­å®šã‚’è¿½åŠ ã§æŒ‡å®šã—ã¦ã„ã¾ã™:</p>



<ul><li class=""><code>es.batch.size.bytes</code>: (default: 1mb)</li><li class=""><code>es.batch.size.entries</code>: (default 1000)</li><li class=""><code>es.scroll.size</code>: (default: 50)</li></ul>



<p>ã„ãšã‚Œã‚‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«é–¢ä¿‚ãŒã‚ã‚‹è¨­å®šã¨ãªã£ã¦ãŠã‚Šã€æœ€åˆã®&nbsp;<code>es.batch.size.bytes</code>&nbsp;ã¨&nbsp;<code>es.batch.size.entries</code>&nbsp;ã¯æ›¸ãè¾¼ã¿æ™‚ã«Bulk APIã‚’å‘¼ã³å‡ºã™éš›ã®ã‚µã‚¤ã‚ºã§ã€ã‚³ãƒ³ãƒãƒ¼ã‚ºã—ãŸJSONã‚¨ãƒ³ãƒˆãƒªãŒã„ãšã‚Œã‹ã®ã‚µã‚¤ã‚ºã«åˆ°é”ã—ãŸã‚‰APIãŒã‚³ãƒ¼ãƒ«ã•ã‚Œã‚‹ã¨è¨€ã†å†…å®¹ã«ãªã£ã¦ãŠã‚Šã€å½“ç„¶ãªãŒã‚‰å¤§ãã„ã‚µã‚¤ã‚ºã‚’æŒ‡å®šã™ã‚‹äº‹ã§Elasticsearchã¸ã®æ¥ç¶šæ•°ãŒæ¸›ã‚Šã¾ã™ã€‚<br>è¨­å®šå€¤ã«ã¤ã„ã¦ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚µã‚¤ã‚ºã®å‚¾å‘ã‚„ã€ã‚¯ãƒ©ã‚¹ã‚¿ã®è¨­å®šã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®æ§‹æˆã€Sparkä¸Šã§ã®ã‚¿ã‚¹ã‚¯æ•°ã«ä¾å­˜ã™ã‚‹ç‚ºæ­£è§£ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ã‚¨ãƒ©ãƒ¼ãŒé »ç™ºã—ãªã„ç¯„å›²ã§ã€å¯èƒ½ãªé™ã‚Šå¤§ãã„æ•°å€¤ã‚’ä½¿ã£ã¦èª¿æ•´ã—ã¦ã„ã¾ã™ã€‚</p>



<p><code>es.scroll.size</code>&nbsp;ã‚‚åŒæ§˜ã§ã€Elasticsearchã«æŠ•å…¥ã™ã‚‹ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿é‡ã ã¨50ã§ã¯å°‘ãªã™ãã§ã€ä¾‹ãˆã°ä»Šå›ã®é‡ã ã¨60ä¸‡å›ã‚‚Elasticsearchã®Scroll APIã‚’å‘¼ã³å‡ºã•ãªã„ã¨ã„ã‘ãªããªã‚Šã€ç¾å®Ÿçš„ã§ã¯ãªã„ã®ã§ã“ã‚Œã‚‚å¯èƒ½ãªé™ã‚Šå¤§ãã„å€¤ã‚’è¨­å®šã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>



<p>â€»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«ã¤ã„ã¦ã¯<a href="https://www.elastic.co/guide/en/elasticsearch/hadoop/6.7/performance.html#_write_performance">å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã“ã®ãƒšãƒ¼ã‚¸</a>ãŒè©³ã—ã„ã§ã™ã€‚</p>



<h2 id="ã¾ã¨ã‚"><a href="https://hackmd.io/Cw5kP4jZRVuLN_kpOESqSw?view#%E3%81%BE%E3%81%A8%E3%82%81"></a>ã¾ã¨ã‚</h2>



<p>ElasticsearchãŒæä¾›ã™ã‚‹ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†ã¨ã€Sparkã¨ã®é€£æºãŒæ¥½ã«å‡ºã‚‹ã¨è¨€ã†äº‹ãŒåˆ†ã‹ã‚Šã¾ã—ãŸã€‚<br>ç¾åœ¨ã¯ã¾ã æœ¬æ ¼çš„ãªé‹ç”¨ãƒ•ã‚§ãƒ¼ã‚ºã«å…¥ã£ã¦ã„ãªã„ç‚ºç´°ã‹ã„ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ç­‰ã¯ã¾ã ã—ã¦ã„ãªã„ã®ã§ã€ã¾ãŸåˆ¥ã®æ©Ÿä¼šã§ãã®ã‚ãŸã‚Šã‚’ã„ã¤ã‹ã”ç´¹ä»‹ã§ãã‚Œã°ã¨æ€ã„ã¾ã™ã€‚</p>
</div><p class="post__date-and-author">June 17, 2019 - posted by <a href="/author/issei">issei_m</a></p><div style="margin-top:4rem"><div><h3>Tags</h3><div class="tag__container"><div class="tag__item"><a class="tag__link" href="/tags/elasticsearch/">Elasticsearch</a></div><div class="tag__item"><a class="tag__link" href="/tags/hadoop/">Hadoop</a></div><div class="tag__item"><a class="tag__link" href="/tags/scala/">Scala</a></div><div class="tag__item"><a class="tag__link" href="/tags/spark/">Spark</a></div></div></div></div></section><section class="section"><div class="sharing-buttons"><button aria-label="facebook" class="react-share__ShareButton sharing-buttons__item" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#3b5998"></circle><path d="M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z" fill="white"></path></svg></button><button aria-label="twitter" class="react-share__ShareButton sharing-buttons__item" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="email" class="react-share__ShareButton sharing-buttons__item" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#7f7f7f"></circle><path d="M17,22v20h30V22H17z M41.1,25L32,32.1L22.9,25H41.1z M20,39V26.6l12,9.3l12-9.3V39H20z" fill="white"></path></svg></button></div></section><section class="section"><div class="post-link"><a class="post-link__left" href="/2019/06/21/laravelã®å¤šå¯¾å¤šã®ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦/"><h3 class="post-link__title">â† å‰ã®æŠ•ç¨¿</h3><p class="post-link__link-text">Laravelã®å¤šå¯¾å¤šã®ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦</p></a><a class="post-link__right" href="/2019/06/10/aws-lambdaä¸Šã§webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°/"><h3 class="post-link__title">æ¬¡ã®æŠ•ç¨¿ â†’</h3><p class="post-link__link-text">AWS Lambdaä¸Šã§Webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°</p></a></div></section><section class="section section--gray"><a class="banner__image-wrapper" href="https://mobalab.net/recruit/" target="_blank" rel="noopener noreferrer"><img class="banner__image banner__image--medium" src="/img/recruit-banner-medium.jpg" alt="we are hiring"/></a><h2>å„ªç§€ãªæŠ€è¡“è€…ã¨ä¸€ç·’ã«ã€å¥½ããªå ´æ‰€ã§åƒãã¾ã›ã‚“ã‹</h2><p>æ ªå¼ä¼šç¤¾ã‚‚ã°ã‚‰ã¶ã§ã¯ã€å„ªç§€ã§æ„æ¬²ã«æº¢ã‚Œã‚‹æ–¹ã‚’å¸¸ã«æ±‚ã‚ã¦ã„ã¾ã™ã€‚åƒãå ´æ‰€ã¯è‡ªç”±ã€åƒãæ™‚é–“ã‚‚æŸ”è»Ÿã«é¸æŠå¯èƒ½ã§ã™ã€‚</p><p>ç¾åœ¨ã€ä»¥ä¸‹ã®è·ç¨®ã‚’å‹Ÿé›†ä¸­ã§ã™ã€‚ã”èˆˆå‘³ã®ã‚ã‚‹æ–¹ã¯ã€ãƒªãƒ³ã‚¯å…ˆã‚’ã”å‚ç…§ä¸‹ã•ã„ã€‚</p><ul><li><a href="https://mobalab.net/recruit/" target="_blank" rel="noopener noreferrer">ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢</a></li><li><a href="https://mobalab.net/recruit/" target="_blank" rel="noopener noreferrer">ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼</a></li><li><a href="https://mobalab.net/recruit/" target="_blank" rel="noopener noreferrer">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼</a></li></ul></section><section class="section"></section><section class="section"><div><h3>ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ®‹ã™</h3><form class="comment-form"><input type="text" class="comment-form__input" name="name" placeholder="ãŠåå‰ï¼ˆå¿…é ˆï¼‰"/><input type="text" class="comment-form__input" name="email" placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹(å¿…é ˆãƒ»å…¬é–‹ã•ã‚Œã¾ã›ã‚“)"/><textarea class="comment-form__input" name="body" cols="39" rows="4" placeholder="ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆå¿…é ˆï¼‰"></textarea><button class="comment-form__button" type="submit">ã‚³ãƒ¡ãƒ³ãƒˆã‚’é€ä¿¡</button></form></div></section></div></div><aside class="sidebar-container"><div class="widget"><div class="widget__contents"><a class="banner__image-wrapper" href="https://mobalab.net/recruit/" target="_blank" rel="noopener noreferrer"><img class="banner__image" src="/img/recruit-banner-medium.jpg" alt="we are hiring"/></a></div></div><div class="widget"><h4 class="widget__title">æœ€è¿‘ã®æŠ•ç¨¿</h4><div class="widget__contents"><ul><li><a href="/2020/09/24/scala-error-handling-option-either">Scala ã® Option, Either ã¨ã‚¨ãƒ©ãƒ¼å‡¦ç†</a></li><li><a href="/2020/09/23/%e9%9d%99%e7%9a%84%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9%e3%81%a8%e5%8b%95%e7%9a%84%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9%ef%bc%88spark-sql%e3%81%ae%e5%b0%8f%e3%83%8d">é™çš„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨å‹•çš„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆSpark SQLã®å°ãƒã‚¿ï¼‰</a></li><li><a href="/2020/09/17/kedro%e8%a7%a6%e3%81%a3%e3%81%a6%e3%81%bf%e3%81%9f">kedroè§¦ã£ã¦ã¿ãŸ</a></li><li><a href="/2020/09/16/bert%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6%e5%8b%89%e5%bc%b7%e3%81%97%e3%81%9f%e3%81%93%e3%81%a8%e3%81%be%e3%81%a8%e3%82%81-3-%e8%87%aa%e5%b7%b1%e6%95%99%e5%b8%ab%e5%ad%a6%e7%bf%92%e3%81%a8%e6%b1%8e">BERTã«ã¤ã„ã¦å‹‰å¼·ã—ãŸã“ã¨ã¾ã¨ã‚ (3) è‡ªå·±æ•™å¸«å­¦ç¿’ã¨æ±ç”¨æ€§ã«ã¤ã„ã¦</a></li><li><a href="/2020/09/15/manage-aks-secrets-with-azure-key-vault">AKSä¸Šã®Kubernetesã®ç§˜åŒ¿æƒ…å ±ã‚’Azure Key Vaultã§ç®¡ç†ã™ã‚‹æ–¹æ³•</a></li></ul></div></div><div class="widget"><h4 class="widget__title">ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–</h4><div class="widget__contents"><ul><li><a href="/archives/2020/09">2020å¹´09æœˆ</a></li><li><a href="/archives/2020/08">2020å¹´08æœˆ</a></li><li><a href="/archives/2020/07">2020å¹´07æœˆ</a></li><li><a href="/archives/2020/06">2020å¹´06æœˆ</a></li><li><a href="/archives/2020/05">2020å¹´05æœˆ</a></li><li><a href="/archives/2020/04">2020å¹´04æœˆ</a></li><li><a href="/archives/2020/03">2020å¹´03æœˆ</a></li><li><a href="/archives/2020/02">2020å¹´02æœˆ</a></li><li><a href="/archives/2019/12">2019å¹´12æœˆ</a></li><li><a href="/archives/2019/11">2019å¹´11æœˆ</a></li><li><a href="/archives/2019/10">2019å¹´10æœˆ</a></li><li><a href="/archives/2019/09">2019å¹´09æœˆ</a></li><li><a href="/archives/2019/08">2019å¹´08æœˆ</a></li><li><a href="/archives/2019/07">2019å¹´07æœˆ</a></li><li><a href="/archives/2019/06">2019å¹´06æœˆ</a></li><li><a href="/archives/2019/05">2019å¹´05æœˆ</a></li><li><a href="/archives/2019/04">2019å¹´04æœˆ</a></li><li><a href="/archives/2019/03">2019å¹´03æœˆ</a></li><li><a href="/archives/2019/02">2019å¹´02æœˆ</a></li><li><a href="/archives/2019/01">2019å¹´01æœˆ</a></li><li><a href="/archives/2018/12">2018å¹´12æœˆ</a></li><li><a href="/archives/2018/11">2018å¹´11æœˆ</a></li><li><a href="/archives/2018/10">2018å¹´10æœˆ</a></li><li><a href="/archives/2018/09">2018å¹´09æœˆ</a></li><li><a href="/archives/2018/08">2018å¹´08æœˆ</a></li><li><a href="/archives/2018/07">2018å¹´07æœˆ</a></li><li><a href="/archives/2018/06">2018å¹´06æœˆ</a></li><li><a href="/archives/2018/05">2018å¹´05æœˆ</a></li><li><a href="/archives/2018/01">2018å¹´01æœˆ</a></li><li><a href="/archives/2017/12">2017å¹´12æœˆ</a></li><li><a href="/archives/2017/11">2017å¹´11æœˆ</a></li></ul></div></div><div class="widget"><h4 class="widget__title">ã‚¿ã‚°</h4><div class="widget__contents"><div class="tag__container"><div class="tag__item"><a href="/tags/aws/">aws (19)</a></div><div class="tag__item"><a href="/tags/lambda/">lambda (10)</a></div><div class="tag__item"><a href="/tags/scala/">scala (8)</a></div><div class="tag__item"><a href="/tags/serverless/">serverless (7)</a></div><div class="tag__item"><a href="/tags/s3/">s3 (5)</a></div><div class="tag__item"><a href="/tags/æ©Ÿæ¢°å­¦ç¿’/">æ©Ÿæ¢°å­¦ç¿’ (5)</a></div><div class="tag__item"><a href="/tags/mod_wsgi/">mod_wsgi (4)</a></div><div class="tag__item"><a href="/tags/ruby-on-rails/">ruby-on-rails (4)</a></div><div class="tag__item"><a href="/tags/spark/">spark (4)</a></div><div class="tag__item"><a href="/tags/ansible/">ansible (3)</a></div><div class="tag__item"><a href="/tags/cli/">cli (3)</a></div><div class="tag__item"><a href="/tags/docker/">docker (3)</a></div><div class="tag__item"><a href="/tags/java/">java (3)</a></div><div class="tag__item"><a href="/tags/kubernetes/">kubernetes (3)</a></div><div class="tag__item"><a href="/tags/laravel/">laravel (3)</a></div><div class="tag__item"><a href="/tags/node-js/">node-js (3)</a></div><div class="tag__item"><a href="/tags/python/">python (3)</a></div><div class="tag__item"><a href="/tags/rails/">rails (3)</a></div><div class="tag__item"><a href="/tags/react-native/">react-native (3)</a></div><div class="tag__item"><a href="/tags/scraping/">scraping (3)</a></div><div class="tag__item"><a href="/tags/terraform/">terraform (3)</a></div><div class="tag__item"><a href="/tags/è‡ªç„¶è¨€èªå‡¦ç†/">è‡ªç„¶è¨€èªå‡¦ç† (3)</a></div><div class="tag__item"><a href="/tags/aws-cli/">aws-cli (2)</a></div><div class="tag__item"><a href="/tags/aws-deep-learning-ami/">aws-deep-learning-ami (2)</a></div><div class="tag__item"><a href="/tags/azure/">azure (2)</a></div><div class="tag__item"><a href="/tags/bert/">bert (2)</a></div><div class="tag__item"><a href="/tags/bug/">bug (2)</a></div><div class="tag__item"><a href="/tags/centos/">centos (2)</a></div><div class="tag__item"><a href="/tags/collection/">collection (2)</a></div><div class="tag__item"><a href="/tags/database/">database (2)</a></div><div class="tag__item"><a href="/tags/debug/">debug (2)</a></div><div class="tag__item"><a href="/tags/ec2/">ec2 (2)</a></div><div class="tag__item"><a href="/tags/eks/">eks (2)</a></div><div class="tag__item"><a href="/tags/github/">github (2)</a></div><div class="tag__item"><a href="/tags/iam/">iam (2)</a></div><div class="tag__item"><a href="/tags/javascript/">javascript (2)</a></div><div class="tag__item"><a href="/tags/k8s/">k8s (2)</a></div><div class="tag__item"><a href="/tags/kinesis/">kinesis (2)</a></div><div class="tag__item"><a href="/tags/machine-learning/">machine-learning (2)</a></div><div class="tag__item"><a href="/tags/nlp/">nlp (2)</a></div><div class="tag__item"><a href="/tags/openssl/">openssl (2)</a></div><div class="tag__item"><a href="/tags/option/">option (2)</a></div><div class="tag__item"><a href="/tags/php/">php (2)</a></div><div class="tag__item"><a href="/tags/rds/">rds (2)</a></div><div class="tag__item"><a href="/tags/ruby/">ruby (2)</a></div><div class="tag__item"><a href="/tags/security/">security (2)</a></div><div class="tag__item"><a href="/tags/typescript/">typescript (2)</a></div><div class="tag__item"><a href="/tags/ubuntu/">ubuntu (2)</a></div><div class="tag__item"><a href="/tags/vagrant/">vagrant (2)</a></div><div class="tag__item"><a href="/tags/virtualbox/">virtualbox (2)</a></div><div class="tag__item"><a href="/tags/windows/">windows (2)</a></div></div></div></div></aside></div></main><footer class="footer"><div class="footer__inner container"><div class="footer__logo-wrapper"><img class="footer__logo-image" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNDAgMjQwIj48cG9seWdvbiBwb2ludHM9IjAgMjYuNjcgMTMuMzMgMjYuNjcgMTMuMzMgNDAgMCA0MCAwIDY2LjY3IDEzLjMzIDY2LjY3IDEzLjMzIDEwNi42NyAxMDYuNjcgMTA2LjY3IDEwNi42NyA4MCA0MCA4MCA0MCA2Ni42NyAxMDYuNjcgNjYuNjcgMTA2LjY3IDQwIDQwIDQwIDQwIDI2LjY3IDEwNi42NyAyNi42NyAxMDYuNjcgMCAwIDAgMCAyNi42NyIvPjxyZWN0IHg9IjQwIiB5PSIxMzMuMzMiIHdpZHRoPSI2Ni42NyIgaGVpZ2h0PSIyNi42NyIvPjxwb2x5Z29uIHBvaW50cz0iMjYuNjcgMTMzLjMzIDAgMTMzLjMzIDAgMjAwIDI2LjY3IDIwMCA4MCAyMDAgODAgMjEzLjMzIDAgMjEzLjMzIDAgMjQwIDEwNi42NyAyNDAgMTA2LjY3IDE3My4zMyAyNi42NyAxNzMuMzMgMjYuNjcgMTMzLjMzIi8+PHBvbHlnb24gcG9pbnRzPSIxMzMuMzMgMTYwIDE3My4zMyAxNjAgMTczLjMzIDI0MCAyMDAgMjQwIDIwMCAxMzMuMzMgMTMzLjMzIDEzMy4zMyAxMzMuMzMgMTYwIi8+PHJlY3QgeD0iMTMzLjMzIiB5PSIxNzMuMzMiIHdpZHRoPSIyNi42NyIgaGVpZ2h0PSI2Ni42NyIvPjxyZWN0IHg9IjIxMy4zMyIgeT0iMTczLjMzIiB3aWR0aD0iMjYuNjciIGhlaWdodD0iNjYuNjciLz48cmVjdCB4PSIyMDYuNjciIHk9IjEzMy4zMyIgd2lkdGg9IjEzLjMzIiBoZWlnaHQ9IjEzLjMzIi8+PHJlY3QgeD0iMjI2LjY3IiB5PSIxMzMuMzMiIHdpZHRoPSIxMy4zMyIgaGVpZ2h0PSIxMy4zMyIvPjxyZWN0IHg9IjEzMy4zMyIgd2lkdGg9IjI2LjY3IiBoZWlnaHQ9IjEwNi42NyIvPjxyZWN0IHg9IjIwNi42NyIgd2lkdGg9IjEzLjMzIiBoZWlnaHQ9IjEzLjMzIi8+PHJlY3QgeD0iMjI2LjY3IiB3aWR0aD0iMTMuMzMiIGhlaWdodD0iMTMuMzMiLz48cGF0aCBkPSJNMjAwLDBIMTczLjMzVjI2LjY3aDQwVjQwaC00MHY2Ni42N0gyNDBWMjBIMjAwWm0xMy4zMyw4MEgyMDBWNjYuNjdoMTMuMzNaIi8+PC9zdmc+" alt="ã‚‚ã°ã‚‰ã¶"/></div><div class="footer__column-container"><div class="footer__column"><h4 class="footer__column-title">ä¼šç¤¾æ¦‚è¦</h4><p>æ ªå¼ä¼šç¤¾ã‚‚ã°ã‚‰ã¶</p><p>è¨­ç«‹: 2013å¹´6æœˆ</p></div><div class="footer__column"><h4 class="footer__column-title">æ¥­å‹™å†…å®¹</h4><p><a href="https://mobalab.net/services/" target="_blank" rel="noopener noreferrer">Webã‚µãƒ¼ãƒ“ã‚¹é–‹ç™º</a></p><p><a href="https://mobalab.net/services/" target="_blank" rel="noopener noreferrer">è‡ªç¤¾ã‚µãƒ¼ãƒ“ã‚¹</a></p><p><a href="https://mobalab.net/services/" target="_blank" rel="noopener noreferrer">å—è¨—é–‹ç™º</a></p><p><a href="https://mobalab.net/services/" target="_blank" rel="noopener noreferrer">ä¸­å°ä¼æ¥­ã®ITåŒ–æ”¯æ´</a></p></div><div class="footer__column"><h4 class="footer__column-title">ãƒªãƒ³ã‚¯</h4><p><a href="https://mobalab.net" target="_blank" rel="noopener noreferrer">æ ªå¼ä¼šç¤¾ã‚‚ã°ã‚‰ã¶ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ</a></p><p><a href="https://blog.mobalab.net/" target="_blank" rel="noopener noreferrer">å…¬å¼ãƒ–ãƒ­ã‚°ã€Œã‚‚ã°ã‚‰ã¶ã‚“ã€</a></p></div><div class="footer__column"><h4 class="footer__column-title">æ¡ç”¨æƒ…å ±</h4><p><a href="https://mobalab.net/recruit/" target="_blank" rel="noopener noreferrer">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼(ãƒªãƒ¢ãƒ¼ãƒˆ)</a></p><p><a href="https://mobalab.net/recruit/" target="_blank" rel="noopener noreferrer">ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢(ãƒªãƒ¢ãƒ¼ãƒˆ)</a></p><p><a href="https://mobalab.net/recruit/" target="_blank" rel="noopener noreferrer">ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼(ãƒªãƒ¢ãƒ¼ãƒˆ)</a></p></div></div></div><div class="footer__bottom-area"><div class="footer__copyright">Â© Mobalab, KK 2020</div></div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2019/06/17/trying-elasticsearch-apache-hadoop-integration/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-388f3e9c75b1616484c3.js"],"component---src-pages-404-js":["/component---src-pages-404-js-3ecfa6f461f2fbf8d1cf.js"],"component---src-templates-author-js":["/component---src-templates-author-js-96473aa85a451f46bba7.js"],"component---src-templates-blog-js":["/component---src-templates-blog-js-e0cd2f4e8a1b4d4c024c.js"],"component---src-templates-category-js":["/component---src-templates-category-js-8327246dc1124f94d530.js"],"component---src-templates-monthly-archive-js":["/component---src-templates-monthly-archive-js-5426866dd5a885424923.js"],"component---src-templates-page-js":["/component---src-templates-page-js-ffa75515ea9d1f8efb9a.js"],"component---src-templates-post-js":["/component---src-templates-post-js-9fbfa639a23c74cb9bb9.js"],"component---src-templates-tag-js":["/component---src-templates-tag-js-28e85cb989fb8ce86070.js"]};/*]]>*/</script><script src="/component---src-templates-post-js-9fbfa639a23c74cb9bb9.js" async=""></script><script src="/commons-e1b0c49c3875256839c2.js" async=""></script><script src="/2852872c-266d0f544f9db0fe515a.js" async=""></script><script src="/29107295-3eadfd8d28513cbe1d99.js" async=""></script><script src="/styles-da2d348018617ad0abdc.js" async=""></script><script src="/app-388f3e9c75b1616484c3.js" async=""></script><script src="/framework-d53df25ab0068ecd1ffc.js" async=""></script><script src="/webpack-runtime-de1f906f2eeac1e4d45f.js" async=""></script></body></html>