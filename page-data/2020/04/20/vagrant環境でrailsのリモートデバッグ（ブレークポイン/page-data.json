{"componentChunkName":"component---src-templates-post-js","path":"/2020/04/20/vagrant環境でrailsのリモートデバッグ（ブレークポイン/","result":{"data":{"wordpressPost":{"id":"2971650f-7c1e-56f1-b419-a5186d577f5e","title":"Vagrant環境でRailsのリモートデバッグ（ブレークポイント使用可能）","excerpt":"<p>基本的には以下の記事の流れに沿ってインストールすれば良いのですが、ある程度インフラに精通していないと完了までに結構はまることになると思いますので、重要なポイントを記録しておきたいと思います。 Visual Studio  [&hellip;]</p>\n","slug":"vagrant%e7%92%b0%e5%a2%83%e3%81%a7rails%e3%81%ae%e3%83%aa%e3%83%a2%e3%83%bc%e3%83%88%e3%83%87%e3%83%90%e3%83%83%e3%82%b0%ef%bc%88%e3%83%96%e3%83%ac%e3%83%bc%e3%82%af%e3%83%9d%e3%82%a4%e3%83%b3","content":"\n<p>基本的には以下の記事の流れに沿ってインストールすれば良いのですが、ある程度インフラに精通していないと完了までに結構はまることになると思いますので、重要なポイントを記録しておきたいと思います。</p>\n\n\n\n<p>Visual Studio Codeは最新のものをインストールで良いと思います。</p>\n\n\n\n<p><a href=\"https://qiita.com/syamagami666/items/11f02be59411eec194f6\">https://qiita.com/syamagami666/items/11f02be59411eec194f6</a></p>\n\n\n\n<h2>スペックなど</h2>\n\n\n\n<p>上記の記事通りにインストールを行ったとしても、OSの種類やバージョンによってはエラーが出る可能性があります。今回は以下の条件で発生したエラーに対応します。</p>\n\n\n\n<ul><li>VirtualBox 6.0.4</li><li>Vagrant 2.2.4</li><li>centos 6.10</li><li>Rails 4.2</li></ul>\n\n\n\n<h2>エラーの内容</h2>\n\n\n\n<p>上記の記事の「Connect to Host&#8230;」を実行した際に以下のエラーが発生したため、一つずつ解決します。</p>\n\n\n<pre class=\"brush: plain; title: ; notranslate\" title=\"\">\n/usr/lib64/libstdc++.so.6: version `GLIBCXX_3.4.14' not found \n/usr/lib64/libstdc++.so.6: version `GLIBCXX_3.4.18' not found \n/usr/lib64/libstdc++.so.6: version `CXXABI_1.3.5' not found \n/usr/lib64/libstdc++.so.6: version `GLIBCXX_3.4.15' not found \n/lib64/libc.so.6: version `GLIBC_2.17' not found \n/lib64/libc.so.6: version `GLIBC_2.16' not found \n/lib64/libc.so.6: version `GLIBC_2.14' not found \n</pre>\n\n\n<p>とりあえず、gccのバージョンが古かったので最新にすることにしました。以下のコマンドでインストールします。</p>\n\n\n<pre class=\"brush: plain; title: ; notranslate\" title=\"\">\n# まずはvagrantに入ります。\nvagrant ssh\n\ngcc -v\n\ncd /home/vagrant/tmp\n\ncurl -LO http://ftp.tsukuba.wide.ad.jp/software/gcc/releases/gcc-8.3.0/gcc-8.3.0.tar.gz\ncurl -LO http://ftp.tsukuba.wide.ad.jp/software/gcc/releases/gcc-8.3.0/sha512.sum\nsha512sum --check sha512.sum\n\nsudo tar xzfv gcc-8.3.0.tar.gz -C /usr/local/src\ncd /usr/local/src/gcc-8.3.0/\nsudo ./contrib/download_prerequisites\nsudo mkdir build\ncd build\nsudo ../configure --enable-languages=c,c++ --prefix=/usr/local --disable-bootstrap --disable-multilib\nsudo make\nsudo make install\n\ngcc -v\n</pre>\n\n\n<p>上記の設定を反映させるために共有ライブラリの参照設定をします。</p>\n\n\n<pre class=\"brush: plain; title: ; notranslate\" title=\"\">\ncd /etc/ld.so.conf.d\n\n# パス &quot;/usr/local/lib64&quot; を以下のファイルに書き込みます。 \nsudo vi usr_local_lib64.conf\n\nsudo mv /usr/local/lib64/libstdc++.so.6.0.25-gdb.py  /usr/local/lib64/back_libstdc++.so.6.0.25-gdb.py\n\nsudo ldconfig\n</pre>\n\n\n<p>以下のエラーが消えないのでさらにライブラリをインストールします。</p>\n\n\n<pre class=\"brush: plain; title: ; notranslate\" title=\"\">\n/lib64/libc.so.6: version `GLIBC_2.17' not found \n/lib64/libc.so.6: version `GLIBC_2.16' not found \n/lib64/libc.so.6: version `GLIBC_2.14' not found \n</pre>\n\n\n<p>バージョン2.17を入れればそれ以下も解決しました。</p>\n\n\n<pre class=\"brush: plain; title: ; notranslate\" title=\"\">\nwget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-2.17-55.el6.x86_64.rpm\nwget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-common-2.17-55.el6.x86_64.rpm\nwget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-devel-2.17-55.el6.x86_64.rpm\nwget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-headers-2.17-55.el6.x86_64.rpm\n\nsudo rpm -Uvh glibc-2.17-55.el6.x86_64.rpm glibc-common-2.17-55.el6.x86_64.rpm glibc-devel-2.17-55.el6.x86_64.rpm glibc-headers-2.17-55.el6.x86_64.rpm\n</pre>\n\n\n<p>後は初めに紹介した記事通りに進めればリモートデバッグできるはずです。今回はRailsで試しましたが、Laravelなどでも同様に構築できると思いますので次回チャレンジしてみようと思います。</p>\n\n\n\n<h2>Tips</h2>\n\n\n\n<p>リモートデバッグした後にVisual Studio Codeのデバッグ停止ボタンを押してから、PCをスリープさせないとプロセスが残って次のリモートデバッグ時にエラーが出ます。その場合は以下のプロセスを探してkillしてみてください。</p>\n\n\n<pre class=\"brush: plain; title: ; notranslate\" title=\"\">\nps aux\nvagrant 12345 XXX 1:23 /opt/rbenv/versions/2.2.2/bin/rdebug-ide\n\nkill 12345\n</pre>\n\n\n<p></p>\n","dateObject":"2020-04-20T00:00:00.000Z","date":"April 20, 2020","categories":[{"name":"Uncategorized","slug":"uncategorized"}],"tags":[{"name":"CentOS","slug":"centos"},{"name":"Rails","slug":"rails"},{"name":"vagrant","slug":"vagrant"},{"name":"virtualbox","slug":"virtualbox"}],"author":{"name":"koji","slug":"koji"},"featured_media":{"media_details":{"sizes":{"large":{"source_url":"https://i1.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2020/04/864457.png?fit=1024%2C768&ssl=1","height":768,"width":1024},"medium_large":{"source_url":"https://i1.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2020/04/864457.png?fit=768%2C576&ssl=1","height":576,"width":768}}},"source_url":"https://stg-engineering-wp.mobalab.net/wp-content/uploads/2020/04/864457.png"},"wordpress_id":1357}},"pageContext":{"id":"2971650f-7c1e-56f1-b419-a5186d577f5e","nextPath":"/2020/04/16/set-system-property-via-java-tool-options/","nextTitle":"JAVA_TOOL_OPTIONS環境変数でAWS Lambda関数のシステムプロパティを設定する","prevPath":"/2020/05/12/rails-app-in-docker-on-azure-app-service/","prevTitle":"Azure App Service + Docker で Rails アプリを動かす"}}}