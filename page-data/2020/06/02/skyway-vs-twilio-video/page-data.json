{"componentChunkName":"component---src-templates-post-js","path":"/2020/06/02/skyway-vs-twilio-video/","result":{"data":{"wordpressPost":{"id":"47fdb475-f471-5b52-bf6b-f56d84b945df","title":"SkyWay vs. Twilio Video","excerpt":"<p>ビデオ通話サービスを構築するための API について調べているときに、SkyWay と Twilio Video を実際に試してみたので、それぞれの長所・短所などを書いていこうと思います。 それぞれの概要 SkyWay  [&hellip;]</p>\n","slug":"skyway-vs-twilio-video","content":"\n<p>ビデオ通話サービスを構築するための API について調べているときに、SkyWay と Twilio Video を実際に試してみたので、それぞれの長所・短所などを書いていこうと思います。</p>\n\n\n\n<h2>それぞれの概要</h2>\n\n\n\n<h3>SkyWay とは</h3>\n\n\n\n<p>NTT コミュニケーションズが提供している、音声・ビデオ通話プラットフォームです。2013年頃から無償サービスとして開始し、2017年に有償化したようです。</p>\n\n\n\n<p>ただ、接続回数50万回/月まで、データ転送量500GB/月までなら無償なので、小規模なアプリなら無償で問題無いでしょう。</p>\n\n\n\n<p>日本人エンジニアがサポートしてくれるところをメリットに感じる人もいるかもしれません。</p>\n\n\n\n<h3>Twilio Video とは</h3>\n\n\n\n<p>Twilio といえば、音声通話が圧倒的に有名だと思いますが、Twilio Video はビデオ通話のプラットフォームです。</p>\n\n\n\n<p>音声と一緒で、完全従量課金です。</p>\n\n\n\n<p>Twilio は、現在業績好調で、新型コロナの影響でビデオ・音声通話の需要も伸びていると思いますし、今後もさらに伸びそうな感じです。</p>\n\n\n\n<h2>機能・品質の比較</h2>\n\n\n\n<p>機能は正直言って、それほど大きな違いはありません。詳細は以下のページを参照して下さい。</p>\n\n\n\n<ul><li><a rel=\"noreferrer noopener\" href=\"https://webrtc.ecl.ntt.com/skyway/function.html\" target=\"_blank\">機能 | SkyWay(アプリやWebサービスに、ビデオ・音声通話をかんたんに導入・実装できるSDK)</a></li><li><a rel=\"noreferrer noopener\" href=\"https://www.twilio.com/video\" target=\"_blank\">Twilio Video | Video SDKs for iOS, Android, JavaScript and web-based video</a></li></ul>\n\n\n\n<p>品質は、両方ともそこまで変わらないか、若干 SkyWay が良いかなと思います。SkyWay は当然国内にサーバーがあるので、ビデオチャット参加者が全員日本在住の人であれば、メリットを享受できると思います。</p>\n\n\n\n<h2>値段の比較</h2>\n\n\n\n<p>公式ページは以下の通りです。</p>\n\n\n\n<ul><li><a href=\"https://webrtc.ecl.ntt.com/pricing.html?_ga=2.157637363.839583440.1591062358-132276746.1587399349\" target=\"_blank\" rel=\"noreferrer noopener\">料金 | SkyWay(アプリやWebサービスに、ビデオ・音声通話をかんたんに導入・実装できるSDK)</a></li><li><a href=\"https://www.twilio.com/video/pricing\" target=\"_blank\" rel=\"noreferrer noopener\">Twilio Video &#8211; Video SDKs for iOS, Android, and JavaScript</a></li></ul>\n\n\n\n<p>それぞれを詳しく見ていきます。</p>\n\n\n\n<h3>SkyWay</h3>\n\n\n\n<p>SkyWay は、無償プランと有償プランがあり、以下の範囲であれば無償プランで問題無いです。</p>\n\n\n\n<ul><li>接続回数50万回/月まで</li><li>データ転送量500GB/月まで</li></ul>\n\n\n\n<p>有償プランは10万円/月の基本料金がかかり、データ転送料は40円/GBです。</p>\n\n\n\n<p>データ転送量ですが、参考までに私が3人でビデオチャットを2時間くらいやって、転送量が5GBくらいでした（仮に有償プランであれば200円）。小規模なアプリなどであれば無償で収まると思います。</p>\n\n\n\n<p>料金ページの「料金モデルケース（1時間あたり）」を見ると、通信量は結構少なく済むように見えますが、解像度やビットレートを明示的に落としたりしないと、こんなに小さな通信量にはならないと思います。（本ページ末尾に追記あり）</p>\n\n\n\n<p>（ここから余談）ちなみに・・・以前の料金ページは「接続回数50万回まで、データ転送量500GBまで無料」という感じの表記でした。「/月」という部分が無かったので、てっきり累計で500GBに達したら10万円/月の有償プランに移行しなければいけないのか、と思って Twilio Video を調べ始めたという経緯があります。</p>\n\n\n\n<p>Wayback Machine で確認しました。画面には 404 と表示されますが、ソースを見ると「500GBまで」という表記が確認出来ます。</p>\n\n\n\n<p><a href=\"https://web.archive.org/web/20200427143840/http://webrtc.ecl.ntt.com/pricing.html\">https://web.archive.org/web/20200427143840/http://webrtc.ecl.ntt.com/pricing.html</a></p>\n\n\n\n<h3>Twilio Video</h3>\n\n\n\n<p>通信量では無く分単位の課金のため、分かりやすいです。</p>\n\n\n\n<p>ビデオチャット部屋の大きさ、通信の仕方によって値段は異なります。一番安いのは Peer-to-peer Room で、SkyWay の mesh 方式に相当するものだと思ってますが、こちらは $0.0015/min/person です。</p>\n\n\n\n<p>先ほどの3人でのビデオチャット例ですと、$0.0015 * 120分 * 3人 = $0.54 = 約60円です。SkyWay の半額以下です。</p>\n\n\n\n<h3>まとめると</h3>\n\n\n\n<p>基本的には無償プランで収まるなら SkyWay が良い。収まらないなら Twilio Video となると思います。</p>\n\n\n\n<p>（値段という観点で）それ以外に SkyWay を選ぶ場面が無いかも色々考えてみました。SkyWay は人数では無く転送量での課金ですので、大人数だけど転送量が少ない、というケースでは、SkyWay を選ぶメリットがあるかもしれません。大人数向けのオンライン講義で、先生のみビデオ通話とか？</p>\n\n\n\n<p>ただ、やはりどう考えても価格面では Twilio Video の方が有利です。</p>\n\n\n\n<h2>SDK、ドキュメント</h2>\n\n\n\n<p>どちらも JavaScript、iOS、Android の SDK があり、ドキュメントも問題無く揃っています。私自身は JavaScript SDK しか触っていませんので、以下、その観点で比較します。</p>\n\n\n\n<h3>SkyWay</h3>\n\n\n\n<p>シンプルなサンプルコードが何種類かあり、それらをすぐ動かす事が出来ます。また、それらをカスタマイズすれば、簡単にビデオ通話アプリが作れます。</p>\n\n\n\n<p><a href=\"https://github.com/skyway/skyway-js-sdk/tree/master/examples\" target=\"_blank\" rel=\"noreferrer noopener\">skyway-js-sdk/examples at master · skyway/skyway-js-sdk</a></p>\n\n\n\n<p>ただ、サンプルアプリは、見栄えがしょぼいので、その辺は自分で綺麗にする必要があります。あと、ベタな JavaScript ですので、React などに載せる場合は、大きく書き換える必要があります。</p>\n\n\n\n<p>ドキュメントは、シンプルで分かりやすいです。JavaScript SDK にはそこまで多くのクラスも無いので、理解も容易です。</p>\n\n\n\n<p><a href=\"https://webrtc.ecl.ntt.com/documents/overview-about-sdk.html\" target=\"_blank\" rel=\"noreferrer noopener\">トップ | ドキュメント | SkyWay(アプリやWebサービスに、ビデオ・音声通話をかんたんに導入・実装できるSDK)</a></p>\n\n\n\n<h3>Twilio Video</h3>\n\n\n\n<p>React で作られたサンプルアプリがあり、見栄えも綺麗です。</p>\n\n\n\n<p><a rel=\"noreferrer noopener\" href=\"https://github.com/twilio/twilio-video-app-react\" target=\"_blank\">twilio/twilio-video-app-react: A collaboration application built with the twilio-video.js SDK and React.js</a></p>\n\n\n\n<p>ただ、その分複雑なので、API を理解したい場合は、API ドキュメントのサンプルコード片などを組み合わせてアプリを作っていく必要があります。</p>\n\n\n\n<p>JavaScript SDK は機能豊富ですが、ドキュメントは結構複雑かつ分かりにくいです。</p>\n\n\n\n<p>以下、わかりにくかったポイントです。</p>\n\n\n\n<ul><li>JS SDK は v1 と v2 で大きく違うが、検索すると v1 のページが結構上の方に出てくる</li><li>クラス階層が SkyWay に比べて複雑<ul><li>track, publication 等の概念の説明があまり無い</li></ul></li><li>イベント数も多い<ul><li>発火タイミングに関する明確な説明が無い？</li></ul></li></ul>\n\n\n\n<h2>その他、使いにくかった点</h2>\n\n\n\n<h3>SkyWay</h3>\n\n\n\n<p>認証機能を使用時に credential の TTL を設定するのですが、TTL に 600（秒）以下を指定するとエラーになりました。ドキュメントに記載は無いと思います（※）。</p>\n\n\n\n<p>有料ビデオチャットを想定して、TTL で残り時間を管理したかったのですが、600以下を指定できないということは、残り5分を切ったところでブラウザを間違えて閉じてしまった場合に、再接続しようとしてもcredential が生成できない、という事態になってしまいます。結局、残り時間の管理は、自前の JS で実装することにしました。</p>\n\n\n\n<p>TTL の最小値は、せめて、60か120くらいにして欲しかったです。</p>\n\n\n\n<p>※検索したところ、swagger の yaml には記載されていました・・・</p>\n\n\n\n<p><a href=\"https://raw.githubusercontent.com/skyway/skyway-webrtc-gateway/master/api/api.yaml\">https://raw.githubusercontent.com/skyway/skyway-webrtc-gateway/master/api/api.yaml</a></p>\n\n\n\n<h3>Twilio Video</h3>\n\n\n\n<p>room の有効期限が最大で24時間のため、都度作り直す必要があるのが面倒でした。</p>\n\n\n\n<p><a href=\"https://www.twilio.com/docs/video/tutorials/understanding-video-rooms#comparing-rest-vs-ad-hoc-rooms\">Understanding Video Rooms &#8211; Twilio</a></p>\n\n\n\n<p>例えば、各ユーザーが1つのビデオチャットの部屋を持てるようにする場合、今日部屋を作っても明日には使えなくなってるので、作り直す必要があります。</p>\n\n\n\n<p>ビデオチャットを使う時間帯が9:00〜18:00とか決まっているのであれば、朝一で作り直せば問題無いですが、いつ使うか分からない場合、使う前に有効期間をチェックして、残り時間が短ければ作り直す必要があります。ただ、JavaScript SDK だと、部屋の有効期限を確認することが出来なさそうで、REST API を使う必要がありそうです。</p>\n\n\n\n<p><a href=\"https://www.twilio.com/docs/video/api/rooms-resource#get-instance\">REST API: Rooms &#8211; Twilio</a></p>\n\n\n\n<p>なんでこんな面倒な事になってるんでしょうね。</p>\n\n\n\n<h2>まとめ：結局どちらを使うべき？</h2>\n\n\n\n<ul><li>SkyWay の無償プランで収まり、将来も超える可能性は無い -&gt; SkyWay</li><li>利用者が全員日本国内在住で高品質が求められる -&gt; SkyWay</li><li>規則等で、海外サーバーにデータを送るのはダメ -&gt; SkyWay</li><li>日本語でサポートが無いと困る -&gt; SkyWay</li><li>それ以外 -&gt; Twilio Video</li></ul>\n\n\n\n<p>という結論に至りました。</p>\n\n\n\n<p>もう少し SkyWay の価格が安ければ、同じ日本企業ですし「SkyWay 良いですよー！」って宣伝しまくると思いますが、有償プランの基本料金10万円/月はエグいです。グローバル企業と国内企業の体力の差でしょうか。</p>\n\n\n\n<hr class=\"wp-block-separator\"/>\n\n\n\n<h2>追記: SkyWay の料金について</h2>\n\n\n\n<p>本記事を読んで下さったNTTコミュニケーションズの方から、料金に関して補足の情報を頂きました。ありがとうございます。まずはそのまま転載します。</p>\n\n\n\n<blockquote class=\"wp-block-quote\"><p>> 有償プランは10万円/月の基本料金がかかり、データ転送料は40円/GBです。</p><p>SFU方式で接続した場合はSFUサーバを利用するのでその通りです。</p><p>しかし、Mesh方式で接続した場合はまずP2Pで接続しようとします。P2Pで繋がった場合、データ転送料は0円です。</p><p>一部のP2P通信ができないネットワークの環境のみ、通信のために中継サーバ(TURN)を利用し、その場合は転送料がかかります。</p><p>通信環境に依存しますが、P2P通信ができない割合は全体の10%程度です。</p><p>「料金モデルケース（1時間あたり）」では、この割合を加味しているため、ご想定よりも通信量が少なく見えているのかと思います。</p><p>通信料金体系が分かりづらく申し訳ございませんが、</p><p>より安価に提供するため、実際に利用したリソースに応じた課金という形式を取らせていただいています。</p><p>参考情報までに、TURNが使われる条件については以下FAQに掲載されています。</p><p><a rel=\"noreferrer noopener\" href=\"https://support.skyway.io/hc/ja/articles/360048404634\" target=\"_blank\">https://support.skyway.io/hc/ja/articles/360048404634</a></p><p></p></blockquote>\n\n\n\n<p>好意的に解釈しても、料金ページはかなり誤解を招く内容だと思います。</p>\n\n\n\n<p>現実世界では「4人のうち10%の0.4人がTURNを使用する」という事はあり得ず、殆どの場合は4人のうち0人か1人がTURNを使用することになります。そして、TURNを使用する人が1人いる場合は料金モデルケースを大幅に超えてしまいます。</p>\n\n\n\n<p>また、約10％がTURNを利用しているとのことでしたが、私が3〜4人のビデオチャットを、毎回異なるメンバーで3回試した限りでは、私を含めた8人のうち少なくとも3人がTURNを使用しているようでした。（全員自宅からの接続で、同一の社内LANなどではありません。）</p>\n\n\n\n<p>「モデルケース」と記載するのであれば、その前提条件を記載しないと、あまり有用な情報では無いので、改善されることを期待します。</p>\n","dateObject":"2020-06-02T03:41:34.000Z","date":"June 02, 2020","categories":[{"name":"Uncategorized","slug":"uncategorized"}],"tags":[{"name":"SkyWay","slug":"skyway"},{"name":"Twilio","slug":"twilio"},{"name":"WebRTC","slug":"webrtc"}],"author":{"name":"中の人（管理者）","slug":"engineering_8qmk0b"},"featured_media":{"media_details":{"sizes":{"large":{"source_url":"https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2020/06/skyway-vs-twilio.png?fit=1024%2C683&ssl=1","height":683,"width":1024},"medium_large":{"source_url":"https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2020/06/skyway-vs-twilio.png?fit=768%2C512&ssl=1","height":512,"width":768}}},"source_url":"https://stg-engineering-wp.mobalab.net/wp-content/uploads/2020/06/skyway-vs-twilio.png"},"wordpress_id":1516}},"pageContext":{"id":"47fdb475-f471-5b52-bf6b-f56d84b945df","nextPath":"/2020/06/01/rails-has-many-through-with-scope/","nextTitle":"Rails の has_many through で scope を使う","prevPath":"/2020/06/12/bertについて勉強したことまとめ-2モデル構造につい/","prevTitle":"BERTについて勉強したことまとめ (2)モデル構造について"}}}