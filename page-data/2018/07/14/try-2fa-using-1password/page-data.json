{"componentChunkName":"component---src-templates-post-js","path":"/2018/07/14/try-2fa-using-1password/","result":{"data":{"wordpressPost":{"id":"a03ec3aa-d105-5f0e-ba95-d5e112b9bae1","title":"1Passwordの二要素認証機能を試してみる","excerpt":"<p>皆さんこんにちは。梅雨も明け、一気に夏模様となりましたね。熱中症等に気をつけて過ごしていきたい所です。 さて、今回は1Passwordの二要素認証ついて書いてみたいと思います。 1Passwordとは このブログの読者に [&hellip;]</p>\n","slug":"try-2fa-using-1password","content":"<p class=\"part\" data-startline=\"3\" data-endline=\"3\">皆さんこんにちは。梅雨も明け、一気に夏模様となりましたね。熱中症等に気をつけて過ごしていきたい所です。</p>\n<p class=\"part\" data-startline=\"5\" data-endline=\"5\">さて、今回は1Passwordの二要素認証ついて書いてみたいと思います。</p>\n<h2 id=\"1Passwordとは\" class=\"part\" data-startline=\"7\" data-endline=\"7\">1Passwordとは</h2>\n<p class=\"part\" data-startline=\"9\" data-endline=\"12\">このブログの読者には知らない方はそう多くないと思いますが、一応説明するとパスワード管理ツール、及びそれを提供しているサービスです。<br />\n米AgileBits社が開発、運営、提供しています。サイトは <a href=\"https://1password.com/\" target=\"_blank\" rel=\"noopener\">https://1password.com/</a> になります。<br />\nWindowsやmacOSを搭載するのパソコンはもちろん、iOS, Androidのスマートフォン、タブレットでも利用する事ができます。パスワードはローカルやクラウドに保管する事が可能で、パスワードへのアクセスするにはマスターパスワードや、指紋を使います。</p>\n<p class=\"part\" data-startline=\"14\" data-endline=\"14\">そう言えば、<a href=\"http://www.itmedia.co.jp/news/articles/1807/12/news116.html\">Appleが全従業員 (12万3000人) に1Passwordを導入する</a>事で、AgileBitsを買収するのでは？と言った話題がありましたね。</p>\n<h2 id=\"二要素認証\" class=\"part\" data-startline=\"16\" data-endline=\"16\">二要素認証</h2>\n<p class=\"part\" data-startline=\"18\" data-endline=\"18\">1Passwordについての余り詳しい説明はここではしませんが、機能の一つとして、二要素認証によるログインの管理が可能です。</p>\n<p class=\"part\" data-startline=\"20\" data-endline=\"20\">二要素認証についても、知らない方はあまりいないと思うのですが、Wikipediaによると</p>\n<blockquote class=\"part\" data-startline=\"22\" data-endline=\"24\"><p>多要素認証（たようそにんしょう）は、アクセス権を得るのに必要な本人確認のための要素（証拠）を複数、ユーザーに要求する認証方式である[1][2]。 必要な要素が二つの場合は、二要素認証とも呼ばれる。</p>\n<p><a href=\"https://ja.wikipedia.org/wiki/%E5%A4%9A%E8%A6%81%E7%B4%A0%E8%AA%8D%E8%A8%BC\" target=\"_blank\" rel=\"noopener\">https://ja.wikipedia.org/wiki/多要素認証</a></p></blockquote>\n<p class=\"part\" data-startline=\"26\" data-endline=\"28\">大抵のWebシステムでの二要素認証では、ログイン時にID・パスワードに加え、もう1つの要素として、SMS経由で送られたり<a href=\"https://ja.wikipedia.org/wiki/Google_Authenticator\" target=\"_blank\" rel=\"noopener\">Google Authenticator</a> 等のモバイルアプリから生成される認証コードを使う事が多く、また認証コードは一定の時間が経つと使えなくなるワンタイムパスワードである為、パスワードが万が一他人に盗まれたとしても、端末さえ盗まれなければログインはされにくいと言う事になります。</p>\n<p class=\"part\" data-startline=\"30\" data-endline=\"31\"><img class=\"alignnone wp-image-284\" src=\"https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/y8Pu8Lg.png?resize=296%2C485&#038;ssl=1\" alt=\"\" width=\"296\" height=\"485\" srcset=\"https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/y8Pu8Lg.png?resize=183%2C300&amp;ssl=1 183w, https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/y8Pu8Lg.png?resize=768%2C1256&amp;ssl=1 768w, https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/y8Pu8Lg.png?resize=626%2C1024&amp;ssl=1 626w, https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/y8Pu8Lg.png?w=1070&amp;ssl=1 1070w\" sizes=\"(max-width: 296px) 100vw, 296px\" data-recalc-dims=\"1\" /><br />\n<small>Google Authenticatorの画面キャプチャ</small></p>\n<p class=\"part\" data-startline=\"33\" data-endline=\"34\">モバイルアプリの場合、連携にはサービス側から提供される、認証コードを生成する為のシークレットをQRコードを使って、インターネットを経由せず端末に取り込みます。<br />\n1Passwordでは、端末の代わりにシークレットを保存する事によって、1Passwordのみで二要素認証を完結させる事ができます。<br />\n普段モバイルアプリによる二要素認証をあらゆるサービスで使っていると分かるのですが、認証コードが多くなると一瞬でどれがそのサービスの物か分からなくなるのでこれは何気に便利です。</p>\n<h2 id=\"実際にやってみた\" class=\"part\" data-startline=\"36\" data-endline=\"36\">実際にやってみる</h2>\n<p class=\"part\" data-startline=\"38\" data-endline=\"38\">GitHubを使って実際にやってみたいと思います。今回は1Password 7を使います。</p>\n<p class=\"part\" data-startline=\"40\" data-endline=\"40\">まずは、1Passwordに予めGitHubのログインプロファイルを追加しておきます。（アカウントは検証用のサブアカウントです）</p>\n<p class=\"part\" data-startline=\"42\" data-endline=\"42\"><img class=\"alignnone wp-image-285\" src=\"https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/3iwP06R.png?resize=1047%2C701&#038;ssl=1\" alt=\"\" width=\"1047\" height=\"701\" srcset=\"https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/3iwP06R.png?resize=300%2C201&amp;ssl=1 300w, https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/3iwP06R.png?w=726&amp;ssl=1 726w\" sizes=\"(max-width: 1047px) 100vw, 1047px\" data-recalc-dims=\"1\" /><br />\n<small>画面上部にはGitHubは二要素認証が使える事が説明されています</small></p>\n<p class=\"part\" data-startline=\"46\" data-endline=\"46\">次にGitHubの二要素認証の設定を開き、“using an app” の方を選択し（GitHubは他にSMSによる認証コードの利用ができます）、そのままQRコードが表示される画面まで行きます。</p>\n<p class=\"part\" data-startline=\"50\" data-endline=\"50\"><img class=\"alignnone wp-image-287\" src=\"https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/hmumteC.png?resize=440%2C455&#038;ssl=1\" alt=\"\" width=\"440\" height=\"455\" data-recalc-dims=\"1\" /></p>\n<p class=\"part\" data-startline=\"52\" data-endline=\"53\">そうしたら、先程の1Passwordのプロファイルを編集モードにし、<strong>SECTION</strong> から、新たに “One-Time Password” の項目を追加します。<br />\n右側のプルダウンを展開すると見つかります。</p>\n<p class=\"part\" data-startline=\"55\" data-endline=\"55\"><img class=\"alignnone wp-image-289\" src=\"https://i1.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/NEGrZXL.png?resize=1051%2C683&#038;ssl=1\" alt=\"\" width=\"1051\" height=\"683\" srcset=\"https://i1.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/NEGrZXL.png?resize=300%2C195&amp;ssl=1 300w, https://i1.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/NEGrZXL.png?resize=768%2C500&amp;ssl=1 768w\" sizes=\"(max-width: 1051px) 100vw, 1051px\" data-recalc-dims=\"1\" /></p>\n<p class=\"part\" data-startline=\"57\" data-endline=\"57\">プルダウンを選択すると、次のように表示が変わります。プルダウンの左横にQRコードが表示されました。</p>\n<p class=\"part\" data-startline=\"59\" data-endline=\"59\"><img class=\"alignnone wp-image-290\" src=\"https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/JmE7dww.png?resize=638%2C51&#038;ssl=1\" alt=\"\" width=\"638\" height=\"51\" srcset=\"https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/JmE7dww.png?resize=300%2C24&amp;ssl=1 300w, https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/JmE7dww.png?w=751&amp;ssl=1 751w\" sizes=\"(max-width: 638px) 100vw, 638px\" data-recalc-dims=\"1\" /></p>\n<p class=\"part\" data-startline=\"61\" data-endline=\"62\">このQRコードをクリックすると、なんとQRコード読み取りのファインダーが表示されます。<br />\nこれを、先程ブラウザに表示されたQRコードに重ねると、読み取りができます。面白いUIですね。</p>\n<p class=\"part\" data-startline=\"64\" data-endline=\"64\"><img class=\"alignnone wp-image-291\" src=\"https://i1.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/jAJZ3NW.png?resize=752%2C451&#038;ssl=1\" alt=\"\" width=\"752\" height=\"451\" srcset=\"https://i1.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/jAJZ3NW.png?resize=300%2C180&amp;ssl=1 300w, https://i1.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/jAJZ3NW.png?resize=768%2C461&amp;ssl=1 768w, https://i1.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/jAJZ3NW.png?resize=1024%2C615&amp;ssl=1 1024w\" sizes=\"(max-width: 752px) 100vw, 752px\" data-recalc-dims=\"1\" /></p>\n<p class=\"part\" data-startline=\"66\" data-endline=\"66\"><small>ファインダーの枠は最初青ですが、読み取りに成功すると緑色に変わり、直後に登録がされる</small></p>\n<p class=\"part\" data-startline=\"68\" data-endline=\"69\">このままプロファイルを保存すれば端末への登録は完了です。<br />\nプロファイルを見ると、6桁の数値（認証コード）が表示されるようになりました。クリップボードにコピーできるのが便利ですね。</p>\n<p class=\"part\" data-startline=\"71\" data-endline=\"71\"><img class=\"alignnone wp-image-293\" src=\"https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/m2U0cp2.png?resize=748%2C464&#038;ssl=1\" alt=\"\" width=\"748\" height=\"464\" srcset=\"https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/m2U0cp2.png?resize=300%2C186&amp;ssl=1 300w, https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/m2U0cp2.png?w=753&amp;ssl=1 753w\" sizes=\"(max-width: 748px) 100vw, 748px\" data-recalc-dims=\"1\" /></p>\n<p class=\"part\" data-startline=\"73\" data-endline=\"73\">この後、GitHub側に表示されている認証コードを入力すれば連携が完了します。</p>\n<p class=\"part\" data-startline=\"75\" data-endline=\"75\"><img class=\"alignnone wp-image-294\" src=\"https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/aic4Lks.png?resize=510%2C131&#038;ssl=1\" alt=\"\" width=\"510\" height=\"131\" srcset=\"https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/aic4Lks.png?resize=300%2C77&amp;ssl=1 300w, https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/aic4Lks.png?w=543&amp;ssl=1 543w\" sizes=\"(max-width: 510px) 100vw, 510px\" data-recalc-dims=\"1\" /></p>\n<h2 id=\"ログインしてみる\" class=\"part\" data-startline=\"77\" data-endline=\"77\">ログインしてみる</h2>\n<p class=\"part\" data-startline=\"79\" data-endline=\"79\">一旦GitHubからログアウトして、再度ログイン画面を表示し、いつも通りプロファイルからIDとパスワードをFillします。</p>\n<p class=\"part\" data-startline=\"81\" data-endline=\"81\"><img class=\"alignnone wp-image-295\" src=\"https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/OAmyYOa.png?resize=741%2C516&#038;ssl=1\" alt=\"\" width=\"741\" height=\"516\" srcset=\"https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/OAmyYOa.png?resize=300%2C209&amp;ssl=1 300w, https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/OAmyYOa.png?resize=768%2C535&amp;ssl=1 768w, https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/OAmyYOa.png?resize=1024%2C714&amp;ssl=1 1024w, https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/OAmyYOa.png?w=1749&amp;ssl=1 1749w\" sizes=\"(max-width: 741px) 100vw, 741px\" data-recalc-dims=\"1\" /></p>\n<p class=\"part\" data-startline=\"83\" data-endline=\"83\">すると、1Passwordから次のような通知が来ます。</p>\n<p class=\"part\" data-startline=\"85\" data-endline=\"85\"><img class=\"alignnone wp-image-296\" src=\"https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/2Smfl8P.png?resize=339%2C70&#038;ssl=1\" alt=\"\" width=\"339\" height=\"70\" srcset=\"https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/2Smfl8P.png?resize=300%2C62&amp;ssl=1 300w, https://i0.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/2Smfl8P.png?w=674&amp;ssl=1 674w\" sizes=\"(max-width: 339px) 100vw, 339px\" data-recalc-dims=\"1\" /></p>\n<p class=\"part\" data-startline=\"87\" data-endline=\"88\">そう、来る二要素認証の為に、予め6桁の数値をクリップボードにコピーしてくれるのです。これは便利！<br />\nモバイル端末を開くまでも無く、PC内で完結しているだけでも大分手間が省けていますが、これでより認証が楽になります。</p>\n<p class=\"part\" data-startline=\"90\" data-endline=\"90\">次の画面ではボックスにそのままペーストするだけで無事ログインができました。</p>\n<p class=\"part\" data-startline=\"92\" data-endline=\"92\"><img class=\"alignnone wp-image-298\" src=\"https://i1.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/vE3vEXQ.png?resize=417%2C281&#038;ssl=1\" alt=\"\" width=\"417\" height=\"281\" srcset=\"https://i1.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/vE3vEXQ.png?resize=300%2C202&amp;ssl=1 300w, https://i1.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/vE3vEXQ.png?w=387&amp;ssl=1 387w\" sizes=\"(max-width: 417px) 100vw, 417px\" data-recalc-dims=\"1\" /></p>\n<p class=\"part\" data-startline=\"94\" data-endline=\"94\">因みに、一定時間が経過すると、6桁の数値をクリップボードに上書きする前に元々書き込まれてた内容が戻ってきます。また、その内容も通知されます。</p>\n<p class=\"part\" data-startline=\"96\" data-endline=\"96\"><img class=\"alignnone wp-image-299\" src=\"https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/eM4tvjj.png?resize=342%2C74&#038;ssl=1\" alt=\"\" width=\"342\" height=\"74\" srcset=\"https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/eM4tvjj.png?resize=300%2C65&amp;ssl=1 300w, https://i2.wp.com/stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/eM4tvjj.png?w=686&amp;ssl=1 686w\" sizes=\"(max-width: 342px) 100vw, 342px\" data-recalc-dims=\"1\" /></p>\n<h2 id=\"感想\" class=\"part\" data-startline=\"98\" data-endline=\"98\">感想</h2>\n<p class=\"part\" data-startline=\"100\" data-endline=\"103\">1Passwordにより、パスワードだけでなく二要素認証自体も簡略化できました。<br />\n一方で、1Passwordにパスワードと認証コード（を生成するシークレット）をいっしょくたに保管する事は、万が一1Passwordがクラックされた場合、ログイン情報と認証コードが一度に流出する恐れがあり、これは本来の二要素認証が持つ安全性を壊す事を意味します。<br />\nこの為、絶対に攻撃されたら困るサービスについてはパスワードを脳内管理するように、従来の物理モバイルによる二要素認証を使う等の使い分けが必要かなと感じました。<br />\nあるいは、少なくともパスワードの保存方法はローカルに留めた方が良さそうですね。<br />\nただ、それでも二要素認証を全く設定しないよりはマシだと思うので、気軽に使える点は素晴らしいと思います。</p>\n","dateObject":"2018-07-14T02:00:12.000Z","date":"July 14, 2018","categories":[{"name":"Uncategorized","slug":"uncategorized"}],"tags":[{"name":"1Password","slug":"1password"},{"name":"Password","slug":"password"},{"name":"Security","slug":"security"},{"name":"二要素認証","slug":"%e4%ba%8c%e8%a6%81%e7%b4%a0%e8%aa%8d%e8%a8%bc"}],"author":{"name":"issei_m","slug":"issei"},"featured_media":{"media_details":{"sizes":{"large":null,"medium_large":null}},"source_url":"https://stg-engineering-wp.mobalab.net/wp-content/uploads/2018/07/1password-logo-awesome@2x.png"},"wordpress_id":154}},"pageContext":{"id":"a03ec3aa-d105-5f0e-ba95-d5e112b9bae1","nextPath":"/2018/06/25/experiment-with-recently-released-amazon-eks/","nextTitle":"Amazon EKSが一般公開されたので使ってみた","prevPath":"/2018/07/18/how-to-check-the-public-ip-on-cli/","prevTitle":"How to check the public (outbound) IP on CLI"}}}