{"version":3,"sources":["webpack:///./src/templates/author.js","webpack:///./src/components/PostList.js"],"names":["Author","props","data","wordpressWpUsers","authored_wordpress__POST","name","totalCount","length","siteTitle","site","siteMetadata","title","posts","map","post","node","pageQuery","IndexPage","render","this","path","className","undefined","date","Date","dateObject","pathFromDate","getPathFromDate","decodeURIComponent","slug","thumbnailSrc","ratio","featured_media","media_details","sizes","medium","source_url","height","width","error","backgroundImageStyle","backgroundImage","backgroundSize","key","id","to","style","author","dangerouslySetInnerHTML","__html","excerpt","replace","React","Component"],"mappings":"8NA4BeA,UAtBA,SAAAC,GAAU,IACfC,EAASD,EAATC,KADc,EAEqBA,EAAKC,iBAAxCC,EAFc,EAEdA,yBAA0BC,EAFZ,EAEYA,KAC5BC,EACHF,GAA4BA,EAAyBG,QAAW,EACpDC,EAAcN,EAAKO,KAAKC,aAA/BC,MACFA,EAAWL,EAAN,SAAuC,IAAfA,EAAmB,GAAK,KAAhD,OAA0DD,EAI/DO,EAAQR,EAAyBS,KAAI,SAAAC,GAAI,MAAK,CAClDC,KAAMD,MAGR,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQH,MAAUN,EAAL,MAAeG,IAC5B,kBAAC,IAAD,CAAUI,MAAOA,EAAOD,MAAOA,MAO9B,IAAMK,EAAS,c,6ICzBDC,E,gLACnBC,OAAA,WAAU,IAAD,EACwBC,KAAKlB,MAA5BW,EADD,EACCA,MAAOQ,EADR,EACQA,KAAMT,EADd,EACcA,MAErB,OACE,6BAASU,UAAU,WACN,MAATD,QAA0BE,IAAVX,GAChB,uBAAGU,UAAU,4BAA6BV,GAE5C,yBAAKU,UAAU,aACZT,EAAMC,KAAI,YAAqB,IAAZC,EAAW,EAAjBC,KACNQ,EAAO,IAAIC,KAAKV,EAAKW,YACrBC,EAAY,IAAOC,0BAAgBJ,GAAvB,IAAgCK,mBAAmBd,EAAKe,MAAxD,IAEdC,EAAe,wBACfC,EAAQ,EAEZ,IACED,EAAehB,EAAKkB,eAAeC,cAAcC,MAAMC,OAAOC,WAD5D,MAGwBtB,EAAKkB,eAAeC,cAAcC,MAAMC,OAA1DE,EAHN,EAGMA,OACRN,EAJE,EAGcO,MACAD,EAChB,MAAME,IAGR,IAAMC,EAAuB,CAC3BC,gBAAgB,OAAQX,EAAT,IACfY,eAAgBX,EAAQ,EAAI,UAAY,SAG1C,OACE,yBAAKV,UAAU,2BACb,kBAAC,IAAD,CACEA,UAAU,kBACVsB,IAAK7B,EAAK8B,GACVC,GAAInB,GAEJ,yBAAKL,UAAU,uBAAuByB,MAAON,IAC7C,yBAAKnB,UAAU,wBACb,wBAAIA,UAAU,oBACXP,EAAKH,OAER,uBAAGU,UAAU,oBACVP,EAAKS,MAER,uBAAGF,UAAU,oBAAb,YAEG,IACD,kBAAC,IAAD,CAAMwB,GAAE,WAAa/B,EAAKiC,OAAOlB,MAC9Bf,EAAKiC,OAAO1C,OAGjB,yBACEgB,UAAU,qBACV2B,wBAAyB,CACvBC,OAAQnC,EAAKoC,QAAQC,QAAQ,wBAAyB,IAAIA,QAAQ,aAAc,UAGpF,yBAAK9B,UAAU,0BACb,kBAAC,IAAD,CACEA,UAAU,uBACVwB,GAAInB,GAFN,qB,GA3DiB0B,IAAMC","file":"component---src-templates-author-js-96473aa85a451f46bba7.js","sourcesContent":["import React from 'react'\nimport Helmet from 'react-helmet'\nimport { graphql } from 'gatsby'\nimport Layout from '../components/Layout'\nimport PostList from '../components/PostList'\n\nconst Author = props => {\n  const { data } = props\n  const { authored_wordpress__POST, name } = data.wordpressWpUsers\n  const totalCount =\n    (authored_wordpress__POST && authored_wordpress__POST.length) || 0\n  const { title: siteTitle } = data.site.siteMetadata\n  const title = `${totalCount} post${totalCount === 1 ? '' : 's'} by ${name}`\n\n  // The `authored_wordpress__POST` returns a simple array instead of an array\n  // of edges / nodes. We therefore need to convert the array here.\n  const posts = authored_wordpress__POST.map(post => ({\n    node: post,\n  }))\n\n  return (\n    <Layout>\n      <Helmet title={`${name} - ${siteTitle}`} />\n      <PostList posts={posts} title={title} />\n    </Layout>\n  )\n}\n\nexport default Author\n\nexport const pageQuery = graphql`\n  query AuthorPage($id: String!) {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    wordpressWpUsers(id: { eq: $id }) {\n      name\n      authored_wordpress__POST {\n        ...PostListFields\n      }\n    }\n  }\n`\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Link, graphql } from 'gatsby'\nimport { getPathFromDate } from '../lib/helper/TimeHelper'\n\nexport default class IndexPage extends React.Component {\n  render() {\n    const { posts, path, title } = this.props\n\n    return (\n      <section className=\"section\">\n        { path !== '/' && title !== undefined && (\n          <p className=\"post-list__section-title\">{ title }</p>\n        )}\n        <div className=\"post-list\">\n          {posts.map(({ node: post }) => {\n            const date = new Date(post.dateObject)\n            const pathFromDate = `/${getPathFromDate(date)}/${decodeURIComponent(post.slug)}/`\n\n            let thumbnailSrc = \"/img/mobalab-logo.jpg\"\n            let ratio = 0\n\n            try {\n              thumbnailSrc = post.featured_media.media_details.sizes.medium.source_url\n\n              const { height, width } = post.featured_media.media_details.sizes.medium\n              ratio = width / height\n            } catch(error) {\n              // console.log(error)\n            }\n            const backgroundImageStyle = {\n              backgroundImage: `url(${thumbnailSrc})`,\n              backgroundSize: ratio > 2 ? 'contain' : 'cover'\n            }\n\n            return (\n              <div className=\"post-list__item-wrapper\">\n                <Link\n                  className=\"post-list__item\"\n                  key={post.id}\n                  to={pathFromDate}\n                >\n                  <div className=\"post-list__thumbnail\" style={backgroundImageStyle} />\n                  <div className=\"post-list__main-area\">\n                    <h4 className=\"post-list__title\">\n                      {post.title}\n                    </h4>\n                    <p className=\"post-list__small\">\n                      {post.date}\n                    </p>\n                    <p className=\"post-list__small\">\n                      posted by\n                      {' '}\n                      <Link to={`/author/${post.author.slug}`}>\n                        {post.author.name}\n                      </Link>\n                    </p>\n                    <div\n                      className=\"post-list__excerpt\"\n                      dangerouslySetInnerHTML={{\n                        __html: post.excerpt.replace(/<p class=\"link-more.*/, '').replace('[&hellip;]', '...'),\n                      }}\n                    />\n                    <div className=\"post-list__button-area\">\n                      <Link\n                        className=\"button button--small\"\n                        to={pathFromDate}\n                      >\n                        続きを読む →\n                      </Link>\n                    </div>\n                  </div>\n                </Link>\n              </div>\n            )}\n          )}\n        </div>\n      </section>\n    )\n  }\n}\n\nIndexPage.propTypes = {\n  posts: PropTypes.arrayOf(PropTypes.object),\n  title: PropTypes.string,\n}\n\nexport const pageQuery = graphql`\n  fragment PostListFields on wordpress__POST {\n    id\n    title\n    excerpt\n    author {\n      name\n      slug\n      avatar_urls {\n        wordpress_48\n      }\n    }\n    dateObject: date\n    date(formatString: \"MMMM DD, YYYY\")\n    slug\n    featured_media {\n      media_details {\n        sizes {\n          medium {\n            source_url\n            height\n            width\n          }\n        }\n      }\n    }\n  }\n`\n"],"sourceRoot":""}